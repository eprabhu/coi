<div class="row mb-2" id="TRAVEL-DISCLOSURE-HEADER"
    [class.header-sticky]="!router.url.includes(travelDisclosurePaths.SUMMARY)">
    <div class="col-12">
        <!-- new top card -->
        <div class="card coi-card-expanded">
            <div class="row mx-0">
                <div class="col-lg px-0">
                    <div class="card-header px-3 border-0">
                        <div class="row flex-grow-1 position-relative m-0">
                            <div class="d-flex col-12 px-0 coi-card-header-notch-container">
                                <!-- badge -->
                                <div class="d-flex mb-auto" attr.aria-label="{{ COMMON_DISCL_LOCALIZE.TRAVEL_BADGE_PREFIX }}Travel disclosure">
                                    <span class="coi-card-notch-ribbon shadow-sm bg-travel-clip">{{ COMMON_DISCL_LOCALIZE.TRAVEL_BADGE_PREFIX }}Travel</span>
                                </div>
                                <div class="col row m-0">
                                    <div class="col-12 d-flex justify-content-between p-0">
                                        <!-- person -->
                                        <span class="d-flex align-items-center coi-text-light ms-2 mt-1 text-nowrap">
                                            <mat-icon aria-hidden="true"
                                                class="fw-bolder coi-text-light flex-shrink-0 coi-mat-icon-size me-1">person</mat-icon>
                                            <a class="link-primary cursor-pointer"
                                                (click)="commonService.openPersonDetailsModal(userDetails.personId)"
                                                tabindex="0"
                                                (keydown.enter)="commonService.openPersonDetailsModal(userDetails.personId)"
                                                (keydown.space)="commonService.openPersonDetailsModal(userDetails.personId)"
                                                [attr.aria-label]="'Click here to show the details of' + userDetails.fullName"
                                                title="Click here to show the details of {{userDetails.fullName}}">
                                                {{userDetails.fullName}}
                                            </a>
                                        </span>

                                        <!-- links -->
                                        <div *ngIf="travelDisclosure?.travelDisclosureId"
                                            class="d-flex justify-content-end align-items-center f-14 ms-auto mt-auto me-3">
                                            <!-- <span class="ms-2 me-2"  role="link"
                                                [title]="0 ? 'Click here to view trainings' : ''"
                                                [attr.aria-label]="0 ? 'Click here to view trainings' : ''"
                                                [ngClass]="0 ? 'link-primary cursor-pointer' : ''" tabindex="-1">
                                                Trainings({{0}})
                                            </span> | -->
                                            <a class="ms-2 me-2 fs-13"
                                                (click)="openPersonSlider('ENTITY', travelDisclosure?.personEntitiesCount)"
                                                role="link" id="coi-travel-disc-engagement-tab"
                                                (keyup.enter)="openPersonSlider('ENTITY', travelDisclosure?.personEntitiesCount)"
                                                (keyup.space)="openPersonSlider('ENTITY', travelDisclosure?.personEntitiesCount)"
                                                [title]="travelDisclosure?.personEntitiesCount ? 'Click here to view engagements' : ''"
                                                [attr.aria-label]="travelDisclosure?.personEntitiesCount ? 'Click here to view engagements' : ''"
                                                [ngClass]="travelDisclosure?.personEntitiesCount ? 'link-primary cursor-pointer' : 'coi-text-light text-decoration-none'"
                                                [tabIndex]="travelDisclosure?.personEntitiesCount > 0 ? 0 : -1">
                                                Engagements<ng-container
                                                    *ngIf="travelDisclosure?.personEntitiesCount">({{travelDisclosure?.personEntitiesCount}})</ng-container>
                                            </a>
                                            <span *ngIf="commonService.canShowReporterNotes"> | </span>
                                            <a *ngIf="commonService.canShowReporterNotes" class="ms-2 me-2 fs-13"
                                                (click)="openPersonSlider('NOTES', travelDisclosure?.personNotesCount)"
                                                role="link" id="coi-travel-disc-notes-tab"
                                                (keyup.enter)="openPersonSlider('NOTES', travelDisclosure?.personNotesCount)"
                                                (keyup.space)="openPersonSlider('NOTES', travelDisclosure?.personNotesCount)"
                                                [title]="travelDisclosure?.personNotesCount ? 'Click here to view notes' : ''"
                                                [attr.aria-label]="travelDisclosure?.personNotesCount ? 'Click here to view notes' : ''"
                                                [ngClass]="travelDisclosure?.personNotesCount ? 'link-primary cursor-pointer' : 'coi-text-light text-decoration-none'"
                                                [tabIndex]="travelDisclosure?.personNotesCount > 0 ? 0 : -1">
                                                Notes<ng-container
                                                    *ngIf="travelDisclosure?.personNotesCount">({{travelDisclosure?.personNotesCount}})</ng-container>
                                            </a>
                                            <span *ngIf="commonService.canShowReporterAttachments"> | </span>
                                            <a *ngIf="commonService.canShowReporterAttachments" class="ms-2 me-2 fs-13"
                                                (click)="openPersonSlider('ATTACHMENTS', travelDisclosure?.personAttachmentsCount)"
                                                role="link" id="coi-travel-disc-attachment-tab"
                                                (keyup.enter)="openPersonSlider('ATTACHMENTS', travelDisclosure?.personAttachmentsCount)"
                                                (keyup.space)="openPersonSlider('ATTACHMENTS', travelDisclosure?.personAttachmentsCount)"
                                                [title]="travelDisclosure?.personAttachmentsCount ? 'Click here to view attachments' : ''"
                                                [attr.aria-label]="travelDisclosure?.personAttachmentsCount ? 'Click here to view attachments' : ''"
                                                [ngClass]="travelDisclosure?.personAttachmentsCount ? 'link-primary cursor-pointer' : 'coi-text-light text-decoration-none'"
                                                [tabIndex]="travelDisclosure?.personAttachmentsCount > 0 ? 0 : -1">
                                                Attachments<ng-container
                                                    *ngIf="travelDisclosure?.personAttachmentsCount">({{travelDisclosure?.personAttachmentsCount}})</ng-container>
                                            </a>
                                            <ng-container *ngIf="isShowOverAllHistory">
                                                <span>|</span>
                                                <a class="ms-2 fs-13 link-primary cursor-pointer" id="coi-travel-disc-overall-history"
                                                    (click)="openHistorySlider()" role="link"
                                                    (keyup.enter)="openHistorySlider()"
                                                    title='Click here to view entire disclosure history' attr.aria-label='Click here to view entire disclosure history' tabIndex="0">
                                                    Disclosure History
                                                </a>
                                            </ng-container>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 d-flex p-0 align-items-center column-gap-3">
                                <!-- email -->
                                <span *ngIf="userDetails?.emailAddress"
                                    class="d-flex align-items-center coi-text-light mt-1"
                                    [title]="userDetails?.emailAddress">
                                    <mat-icon aria-hidden="true"
                                        class="fw-bolder coi-text-light flex-shrink-0 coi-mat-icon-size me-1">mail</mat-icon>
                                    <span class="text-slice">{{userDetails?.emailAddress}}</span>
                                </span>
                                <!-- home unit -->
                                <span class="d-flex align-items-center coi-text-light mt-1"
                                    [title]="commonService.getPersonLeadUnitDetails(userDetails)">
                                    <mat-icon aria-hidden="true"
                                        class="fw-bolder coi-text-light flex-shrink-0 coi-mat-icon-size me-1">home</mat-icon>
                                    <span
                                        class="text-slice">{{commonService.getPersonLeadUnitDetails(userDetails)}}</span>
                                </span>
                                <!-- title -->
                                <span *ngIf="userDetails?.primaryTitle"
                                    class="d-flex align-items-center coi-text-light mt-1"
                                    [title]="userDetails?.primaryTitle">
                                    <mat-icon aria-hidden="true"
                                        class="fw-bolder coi-text-light flex-shrink-0 coi-mat-icon-size me-1">work</mat-icon>
                                    <span class="text-slice">{{userDetails?.primaryTitle}}</span>
                                </span>
                            </div>
                            <h3 *ngIf="travel_service?.travelEntityDetails?.entityName" class="card-title fs-16 mb-0 mt-1 ps-0 entity-margin-left">
                                <div class="fs-16 d-flex align-items-center">
                                    <span class="coi-icon-bg me-2 fs-14 d-inline-flex">
                                        <mat-icon aria-hidden="true" class="coi-text-light flex-shrink-0 coi-coloured-icons coi-mat-icon-size">domain</mat-icon>
                                    </span>
                                    <a class="fs-6 link-primary" tabindex="0" id="travel-header-entity-name-link" (click)="viewEntityDetails()"
                                        (keyup.enter)="viewEntityDetails()"
                                        [attr.aria-label]="'Click here to view details of ' + travel_service?.travelEntityDetails?.entityName"
                                        [title]="'Click here to view details of ' + travel_service?.travelEntityDetails?.entityName">
                                        <span class="text-slice">{{ travel_service?.travelEntityDetails?.entityName }}</span>
                                    </a>
                                </div>
                            </h3>
                            <button (click)="collapseHeader()" title="Click here to collapse / expand"
                                aria-label="Click here to collapse / expand"
                                class="toggle-btn align-items-center border btn d-flex justify-content-center p-0 rounded-5 shadow-sm toggle-btn-position">
                                <mat-icon aria-hidden="true"
                                    [ngClass]="isCardExpanded ? 'coi-rotate-180' : 'coi-rotate-0'">expand_more</mat-icon>
                            </button>
                        </div>
                    </div>
                    <div *ngIf="isCardExpanded">
                        <div class="row p-3">
                            <div class="col-6 col-lg-6 col-xl-4 col-xxl-4">
                                <div class="position-relative coi-box-red border border-secondary border-opacity-50 fw-medium p-3 rounded-1 h-100">
                                    <span class="coi-text-darker fs-6 coi-field-set">Details</span>
                                    <div class="row">
                                        <div class="col">
                                            <span class="coi-text-dark d-block text-nowrap">
                                                <i aria-hidden="true" class="fa fa-user-o fw-700 me-1"></i>
                                                <span>Administrator</span>
                                            </span>
                                            <span id="travel-administrator" class="coi-text-light">
                                                <app-no-data-label [valueToShow]="travelDisclosure?.adminPersonName">
                                                    <span class="coi-text-light text-slice" [title]="ravelDisclosure?.adminPersonName">{{ travelDisclosure?.adminPersonName }}</span>
                                                </app-no-data-label>
                                            </span>
                                        </div>
                                        <div class="col">
                                            <span class="coi-text-dark d-block text-nowrap">
                                                <img alt="add-adminGroup icon" class="w-1rem me-1"
                                                    src="{{deployMap}}assets/images/multiple-admin-1.svg">
                                                <span>Admin Group</span>
                                            </span>
                                            <span id="travel-admin-group" class="coi-text-light">
                                                <app-no-data-label [valueToShow]="travelDisclosure?.adminGroupName">
                                                    <span class="coi-text-light text-slice" [title]="ravelDisclosure?.adminGroupName">{{ travelDisclosure?.adminGroupName }}</span>
                                                </app-no-data-label>
                                            </span>
                                        </div>

                                    </div>
                                </div>
                            </div>
                            <div class="col-6 col-lg-6 col-xl-4 col-xxl-4">
                                <div class="position-relative coi-box-red border border-secondary border-opacity-50 fw-medium p-3 rounded-1 h-100">
                                    <span class="coi-text-darker fs-6 coi-field-set">Dates</span>
                                    <div class="row">
                                        <div class="col">
                                            <span class="coi-text-dark d-block">Create</span>
                                            <span id="travel-create-date" class="coi-text-light">
                                                <app-no-data-label [valueToShow]="travelDisclosure?.createTimestamp">
                                                    <span class="coi-text-light">{{ travelDisclosure?.createTimestamp | dateFormatterWithTimeZone }}</span>
                                                </app-no-data-label>
                                            </span>
                                        </div>
                                        <div class="col">
                                            <span class="coi-text-dark d-block"><ng-container i18n="@@COMMON_SUBMISSION">Certification</ng-container></span>
                                            <span id="travel-certification-date" class="coi-text-light">
                                                <app-no-data-label [valueToShow]="travelDisclosure?.certifiedAt">
                                                    <span class="coi-text-light">{{ travelDisclosure?.certifiedAt | dateFormatterWithTimeZone }}</span>
                                                </app-no-data-label>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col col-lg-12 col-xl-4 col-xxl-4 mt-4 mt-xl-0">
                                <div class="position-relative coi-box-red border border-secondary border-opacity-50 fw-medium p-3 rounded-1 h-100">
                                    <span class="coi-text-darker fs-6 coi-field-set">Status</span>
                                    <div class="row">
                                        <div class="col">
                                            <span class="coi-text-lighter d-block"><ng-container i18n="@@TRAVEL_DISCLOSURE_REVIEW_STATUS">Review</ng-container></span>
                                            <span id="travelDisclosure-reviewStatus">
                                                <app-no-data-label [valueToShow]="travelDisclosure?.travelReviewStatusType?.description">
                                                    <span class="{{ commonService.getTravelReviewStatusBadge(travelDisclosure?.reviewStatusCode) }}"></span>
                                                    <span class="coi-text-dark ms-1">{{ travelDisclosure?.travelReviewStatusType?.description }}</span>
                                                </app-no-data-label>
                                            </span>
                                        </div>
                                        <div class="col">
                                            <span class="coi-text-lighter d-block"><ng-container i18n="@@DISCLOSURE_DOCUMENT">Disclosure</ng-container></span>
                                            <span id="travelDisclosure-documentStatus">
                                                <app-no-data-label [valueToShow]="travelDisclosure?.travelDocumentStatusType?.description">
                                                    <span class="{{ commonService.getDocumentStatusBadge(travelDisclosure?.documentStatusCode) }}"></span>
                                                    <span class="coi-text-dark ms-1">{{ travelDisclosure?.travelDocumentStatusType?.description }}</span>
                                                </app-no-data-label>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="d-flex flex-column col-xxl-3 col-xl-4 col-12 p-3 action-header-border">
                    <div class="row m-0 gap-2 align-items-center">
                        <button (click)="routeToAdminOrUserDashboard()" id="travel_disclosure_close_btn"
                            class="d-inline-flex align-items-center justify-content-center btn btn-outline-grey col fs-14"
                            aria-label="Click here to close" title="Click here to close">
                            <mat-icon aria-hidden="true" class="me-2">close</mat-icon>
                            Close
                        </button>
                        <!-- Comments -->
                        <button *ngIf="isShowCommentButton" title="Click here to add new comment"
                            aria-label="Click here to add new comment" id="travel-comment-btn"
                            (click)="openTravelReviewComment()"
                            class="d-flex align-items-center justify-content-center btn btn-outline-grey fs-14 col text-nowrap">
                            <mat-icon aria-hidden="true" class="flex-shrink-0">rate_review</mat-icon>
                            <span class="ms-2">All Comments</span>
                            <span *ngIf="travelDisclosure?.travelDisclosureCommentsCounts?.totalCount > 0">({{ travelDisclosure?.travelDisclosureCommentsCounts?.totalCount > 99 ? '99+' : travelDisclosure?.travelDisclosureCommentsCounts?.totalCount }})</span>
                        </button>

                        <!-- more option button for expanded card-->
                        <button *ngIf="isShowMoreActionBtn" mat-button [matMenuTriggerFor]="beforeMenu" id="travel-print-disclosure-btn"
                            class="text-nowrap d-flex align-items-center justify-content-center btn btn-outline-grey fs-14 col"
                            title="Click here for more actions" aria-label="Click here for more actions"
                            aria-expanded="false" aria-haspopup="true">
                            <mat-icon class="moreActionIcon flex-shrink-0" aria-hidden="true">more_vert</mat-icon>
                        </button>

                        <button
                            *ngIf="(router.url.includes(travelDisclosurePaths.ENGAGEMENTS))"
                            title="Click here to add new engagement" aria-label="Click here to add new engagement"
                            id="travel-disclosure-create-engagement-btn"
                            class="d-inline-flex justify-content-center align-items-center fs-14 btn btn-primary"
                            (click)="isShowCreateEngSlider = true"
                            [ngClass]="isCardExpanded ? 'col-12' : 'col'">
                            <mat-icon aria-hidden="true">add</mat-icon>
                            <span class="ms-2 text-nowrap">Add Engagement</span>
                        </button>

                        <!-- more options -->
                        <mat-menu #beforeMenu="matMenu" xPosition="before">
                            <!-- reassigned admin -->
                            <button *ngIf="isShowReAssignAdminBtn" mat-menu-item id="travel-discl-reassign-admin-btn"
                                aria-label="Click here to reassign administrator/admin group"
                                title="Click here to reassign administrator/admin group"
                                class="text-nowrap border-0 rounded-0 d-flex justify-content-start w-100 align-items-center more-action"
                                (click)="openAddAssignModal()">
                                <mat-icon aria-hidden="true" class="flex-shrink-0">group_add</mat-icon>
                                <span class="ms-2 fw-medium fs-14">Reassign Admin</span>
                            </button>

                            <!-- Recall disclosure -->
                            <button *ngIf="isShowWithdrawBtn" mat-menu-item id="travel-discl-recall-btn"
                                title="Click here to Recall travel disclosure"
                                aria-label="Click here to Recall travel disclosure"
                                (click)="openConfirmationModal('Recall', true, true, withdrawErrorMsg);"
                                class="text-nowrap border-0 rounded-0 d-flex justify-content-start w-100 align-items-center more-action">
                                <mat-icon aria-hidden="true" class="flex-shrink-0">logout</mat-icon>
                                <span class="ms-2 fw-medium fs-14">Recall</span>
                            </button>

                            <!-- Print -->
                            <button *ngIf="isShowDisclosurePrintBtn" mat-menu-item id="travel-disclosure-print-btn"
                                title="Click here to print the disclosure" aria-label="Click here to print the disclosure"
                                (click)="openPrintDisclosureModal()"
                                class="text-nowrap border-0 rounded-0 btn btn-primary-icon fs-14 d-flex justify-content-start w-100 align-items-center more-action">
                                <mat-icon aria-hidden="true">print</mat-icon>
                                <span class="ms-1 fw-medium fs-14">Print Disclosure</span>
                            </button>
                        </mat-menu>

                        <ng-container *ngIf="!isCreateMode">
                            <!-- assign admin -->
                            <ng-container *ngIf="isShowAssignAdminBtn">
                                <button id="coi-travel-assign-admin-btn" title="Click here to assign administrator/admin group"
                                    aria-label="Click here to assign administrator/admin group"
                                    [ngClass]="isCardExpanded? 'col-lg-12 col' : 'col'"
                                    class="d-flex justify-content-center align-items-center btn btn-primary fs-14 text-nowrap"
                                    (click)="openAddAssignModal()">
                                    <mat-icon aria-hidden="true" class="flex-shrink-0">group_add</mat-icon>
                                    <span class="ms-2">Assign Admin</span>
                                </button>
                            </ng-container>

                            <!-- return to pi -->
                            <button *ngIf="isShowReturnBtn" id="coi-travel-return-btn"
                                title="Click here to return the disclosure"
                                aria-label="Click here to return the disclosure"
                                (click)="openConfirmationModal('Return', true, true, returnErrorMsg);"
                                [ngClass]="isCardExpanded? 'col-lg-12 col' : 'col'"
                                class="btn btn-outline-grey fs-14 d-flex justify-content-center align-items-center">
                                <mat-icon class="returnIcon flex-shrink-0" aria-hidden="true">refresh</mat-icon>
                                <span class="ms-1">Return</span>
                            </button>

                            <!-- approve disclosure -->
                            <button *ngIf="isShowApproveBtn"
                                id="coi-travel-approve-btn" title="Click here to approve the disclosure"
                                aria-label="Click here to approve the disclosure"
                                (click)="openConfirmationModal('Approve', true);"
                                [ngClass]="isCardExpanded? 'col-lg-12 col' : 'col'"
                                class="btn btn-primary fs-14 d-flex justify-content-center align-items-center">
                                <mat-icon aria-hidden="true" class="flex-shrink-0">check_circle_outline</mat-icon>
                                <span class="ms-2">Approve</span>
                            </button>
                        </ng-container>

                        <div *ngIf="isCreateMode" class="d-inline-flex align-items-center justify-content-center flex-wrap gap-2 col-12 px-0">
                            <!-- Previous -->
                            <button *ngIf="travel_service.stepsNavBtnConfig?.previousBtnConfig?.isShowBtn" (click)="goToPrevStep()"
                                id="coi-travel-prev-btn" [disabled]="travel_service.stepsNavBtnConfig?.previousBtnConfig?.isDisabled"
                                class="d-inline-flex align-items-center justify-content-center btn btn-outline-grey col fs-14"
                                [attr.aria-label]="travel_service.stepsNavBtnConfig?.previousBtnConfig?.ariaLabel"
                                [title]="travel_service.stepsNavBtnConfig?.previousBtnConfig?.isDisabled ? 'The button is disabled' : travel_service.stepsNavBtnConfig?.previousBtnConfig?.title">
                                <mat-icon aria-hidden="true">{{ travel_service.stepsNavBtnConfig?.previousBtnConfig?.matIcon }}</mat-icon>
                                <span class="ms-2">{{ travel_service.stepsNavBtnConfig?.previousBtnConfig?.btnName }}</span>
                            </button>
                            <!-- Proceed -->
                            <button *ngIf="travel_service.stepsNavBtnConfig?.proceedBtnConfig?.isShowBtn" (click)="goToNextStep()"
                                id="coi-travel-proceed-btn" [disabled]="travel_service.stepsNavBtnConfig?.proceedBtnConfig?.isDisabled"
                                class="d-inline-flex align-items-center justify-content-center btn btn-outline-grey col fs-14"
                                [attr.aria-label]="travel_service.stepsNavBtnConfig?.proceedBtnConfig?.ariaLabel"
                                [title]="travel_service.stepsNavBtnConfig?.proceedBtnConfig?.isDisabled ? 'The button is disabled' : travel_service.stepsNavBtnConfig?.proceedBtnConfig?.title">
                                <span class="me-2">{{ travel_service.stepsNavBtnConfig?.proceedBtnConfig?.btnName }}</span>
                                <mat-icon aria-hidden="true" class="coi-rotate-180">{{ travel_service.stepsNavBtnConfig?.proceedBtnConfig?.matIcon }}</mat-icon>
                            </button>
                            <!-- submit -->
                            <button *ngIf="isRouteComplete(['certification'])"
                                class="d-flex justify-content-center align-items-center btn btn-primary col fs-14"
                                id="coi-travel-submit-btn" aria-label="Click here to submit the disclosure"
                                (click)="openConfirmationModal('Submit', false);"
                                [disabled]="!travel_service.isTravelCertified" title="Click here to submit the disclosure">
                                <mat-icon class="flex-shrink-0" aria-hidden="true">done</mat-icon>
                                <span class="ms-2">Submit</span>
                            </button>
                        </div>
                    </div>
                    <!-- last update date -->
                    <div *ngIf="isCardExpanded" class="fs-14 coi-text-light mt-2" tabindex="-1">
                        <div class="fw-medium me-3">Last Updated By</div>
                        <div>{{ userDetails.fullName }} On {{ travelDisclosure?.updateTimestamp | dateFormatterWithTimeZone:'long'}}</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- create mode -->
    <ng-container *ngIf="isCreateMode">
        <div class="col-12 mt-2">
            <div class="steps-outer">
                <ul class="steps py-2 mb-0 ps-0 gap-2 pe-3 flex-grow-1"
                    [class.border-end]="travelDisclosure?.reviewStatusCode != 1 && travelDisclosure?.reviewStatusCode != null">
                    <!-- Engagements -->
                    <li>
                        <a class="step-pills" id="step_1"
                            [class.completed-step]="isRouteComplete(['engagements','travel-details', 'certification']) &&  !router.url.includes(travelDisclosurePaths.ENGAGEMENTS)"
                            [class.active-tab]=" router.url.includes(travelDisclosurePaths.ENGAGEMENTS)"
                            tabindex="0" (click)="navigateTo('TRAVEL_ENGAGEMENTS');"
                            (keyup.enter)="navigateTo('TRAVEL_ENGAGEMENTS');"
                            (keyup.space)="navigateTo('TRAVEL_ENGAGEMENTS');"
                            [title]="isRouteComplete(['engagements'])? 'Engagements' : 'Click here to go to step engagements'"
                            [attr.aria-label]="isRouteComplete(['engagements'])? 'Engagements' : 'Click here to go to step engagements'">
                            <span class="plls-icon me-1"><mat-icon aria-hidden="true"
                                    class="mat-step-icon flex-shrink-0">apartment</mat-icon></span>
                            <span class="plls-text">Engagements</span>
                        </a>
                    </li>
                    <!-- divider -->
                    <li>
                        <span class="arrow-right px-2"
                            [class.active-arrow]="isRouteComplete(['engagements','travel-details', 'certification'])">
                            <i class="fa fa-angle-right" aria-hidden="true"></i>
                            <i class="fa fa-angle-right" aria-hidden="true"></i>
                        </span>
                    </li>
                    <!-- Travel Details -->
                    <li>
                        <a class="step-pills" id="step_1"
                            [class.completed-step]="isRouteComplete(['travel-details', 'certification']) &&  !router.url.includes(travelDisclosurePaths.TRAVEL_DETAILS)"
                            [class.active-tab]="router.url.includes(travelDisclosurePaths.TRAVEL_DETAILS)" tabindex="0"
                            (click)="travelDetailsValidation()" (keyup.enter)="travelDetailsValidation()"
                            (keyup.space)="travelDetailsValidation()"
                            [title]="isRouteComplete(['travel-details'])? 'Travel details' : 'Click here to go to step travel details'"
                            [attr.aria-label]="isRouteComplete(['travel-details'])? 'Travel Details' : 'Click here to go to step travel details'">
                            <span class="plls-icon me-1"><mat-icon aria-hidden="true"
                                    class="mat-step-icon flex-shrink-0">flight</mat-icon></span>
                            <span class="plls-text">Travel Details</span>
                        </a>
                    </li>
                    <!-- divider -->
                    <li>
                        <span class="arrow-right px-2" [class.active-arrow]="isRouteComplete(['travel-details', 'certification'])">
                            <i class="fa fa-angle-right" aria-hidden="true"></i>
                            <i class="fa fa-angle-right" aria-hidden="true"></i>
                        </span>
                    </li>
                    <!-- Certification -->
                    <li>
                        <a class="step-pills" [class.completed-step]="isRouteComplete(['certification']) && !router.url.includes(travelDisclosurePaths.CERTIFY)"
                            [class.active-tab]="router.url.includes(travelDisclosurePaths.CERTIFY)" tabindex="0"
                            [title]="isRouteComplete(['certification'])? 'Certification' : 'Click here to go to step certification'"
                            [attr.aria-label]="isRouteComplete(['certification'])? 'Certification' : 'Click here to go to step certification'"
                            id="step_2" (click)="navigateTo('CERTIFY');" (keyup.enter)="navigateTo('CERTIFY');"
                            (keyup.space)="navigateTo('CERTIFY');">
                            <span class="plls-icon me-1"><mat-icon aria-hidden="true"
                                    class="mat-step-icon flex-shrink-0">military_tech</mat-icon></span>
                            <span class="plls-text">Certification</span>
                        </a>
                    </li>
                    <div *ngIf="isCreateMode" class="d-inline-flex position-relative align-items-center ms-auto">
                        <!-- save toast and loader -->
                        <div class="saved-toast-position invisible py-1 align-items-center badge d-inline-flex fw-normal fs-13 px-2 rounded-5 text-bg-light-success"
                            id="success-toast">
                            <span class="me-1">Last saved at {{ autoSaveService.lastSavedTime }}</span>
                            <mat-icon aria-hidden="true" class="coi-success-icon">cloud_done</mat-icon>
                        </div>
                        <div *ngIf="commonService?.autoSaveSavingSpinner !== 'HIDE'" id="inprogress-toast"
                            class="saved-toast-position py-1 d-inline-flex align-items-center fw-normal px-2 rounded-5">
                            <span class="me-1 fs-14">Saving...</span>
                            <mat-icon aria-hidden="true" class="text-success fw-600 coi-rotating">autorenew</mat-icon>
                        </div>
                    </div>
                </ul>
                <!-- additional tabs -->
                <div *ngIf="travelDisclosure.travelDisclosureId" class="d-inline-flex align-items-center gap-3 ms-auto ps-3 border-start">
                    <!-- history -->
                    <button type="button" id="travel-disclosure-history"
                        title="Click here to view the disclosure history"
                        aria-label="Click here to view the disclosure history"
                        [class.coi-active-step-tab]="isRouteComplete(['history'])"
                        class="btn-none coi-step-tab-btn" (click)="navigateTo('HISTORY_CREATE')"
                        [routerLink]="['history']" queryParamsHandling='merge'>
                        <span aria-hidden="true" class="coi-step-tab-icon"><mat-icon class="mat-step-icon flex-shrink-0">update</mat-icon></span>
                        <span class="d-none d-xxl-inline coi-step-tab-text" [attr.coi-step-tab-text]="'History'">History</span>
                    </button>
                </div>
            </div>
        </div>
    </ng-container>
    <!-- view mode -->
    <ng-container *ngIf="!isCreateMode">
        <div class="col-lg-12 mt-1">
            <div class="navigation-tabs d-flex align-items-center" tabindex="-1" role="navigation"
                aria-label="the disclosure">
                <!-- Disclosure -->
                <button (click)="navigateTo('SUMMARY');" (keyup.space)="navigateTo('SUMMARY');"
                    (keyup.enter)="navigateTo('SUMMARY');" class="border-0 btn navigation-box border-end"
                    [title]="isRouteComplete(['summary']) ? 'Disclosure' : 'Go to step Disclosure'"
                    [attr.aria-label]="isRouteComplete(['summary']) ? 'Disclosure' : 'Go to step Disclosure'"
                    role="link">
                    <div class="navigation-box-content" [class.active]="isRouteComplete(['summary'])">
                        Disclosure
                    </div>
                </button>
                <!-- Related Disclosures -->
                <button (click)="navigateTo('RELATED_DISCLOSURES');" (keyup.space)="navigateTo('RELATED_DISCLOSURES');"
                    (keyup.enter)="navigateTo('RELATED_DISCLOSURES');" class="border-0 btn navigation-box border-end"
                    [title]="isRouteComplete(['related-disclosures']) ? 'Related Disclosures' : 'Go to step Related Disclosures'"
                    [attr.aria-label]="isRouteComplete(['related-disclosures']) ? 'Related Disclosures' : 'Go to step Related Disclosures'"
                    role="link">
                    <div class="navigation-box-content" [class.active]="isRouteComplete(['related-disclosures'])">
                        Related Disclosures
                    </div>
                </button>
                <!-- History -->
                <button (click)="navigateTo('HISTORY_VIEW');" (keyup.space)="navigateTo('HISTORY_VIEW');"
                    (keyup.enter)="navigateTo('HISTORY_VIEW');" class="border-0 btn navigation-box border-end"
                    [title]="isRouteComplete(['history']) ? 'History' : 'Go to step History'"
                    [attr.aria-label]="isRouteComplete(['history']) ? 'History' : 'Go to step History'" role="link">
                    <div class="navigation-box-content" [class.active]="isRouteComplete(['history'])">
                        History
                    </div>
                </button>
            </div>
        </div>
    </ng-container>
</div>

<div [class.pb-4]="isCreateMode">
    <router-outlet></router-outlet>
    <ng-container *ngIf="isCreateMode">
        <app-coi-steps-navigation (stepNavAction)="stepNavAction($event)" [stepsNavBtnConfig]="travel_service.stepsNavBtnConfig"></app-coi-steps-navigation>
    </ng-container>
</div>

<!--Unsaved Changes confirmation Modal-->
<app-confirmation-modal [modalName] = "'travel-unsaved-changes-modal'" (secondaryBtnAction)="leavePageClicked()"
    [primaryBtnName]="'Stay On Page'" [secondaryBtnName]="'Leave Page'" (primaryBtnAction)="removeNewTravelCreateObject()" (close)="removeNewTravelCreateObject()">
    <!-- modal header -->
    <ng-container header>
        <span>Confirmation</span>
    </ng-container>
    <!-- modal content -->
    <div content class="ms-2">
        <p *ngIf="travel_service.unSavedTabName === 'Certification'" class="fs-14">Are you sure you want to leave the
            <strong>Certification </strong>page without submitting?</p>
        <p *ngIf="travel_service.unSavedTabName !== 'Certification'" class="fs-14">Are you sure you want to leave the page
            without saving?</p>
    </div>
</app-confirmation-modal>

<!--Confirmation Modal-->
<app-confirmation-modal [modalName]="'travel-confirmation-modal'" (primaryBtnAction)="performDisclosureAction($event)"
    [primaryBtnName]="modalActionBtnName" [modalSize]="modalSize"
    [textAreaLabelName]="'Reason for ' + textAreaLabelName" [needDescriptionField]="needDescriptionField"
    [isMandatory]="isMandatory" [descriptionErrorMsg]="descriptionErrorMsg" [helpText]="reasonHelpText"
    [secondaryBtnTooltip]="'Click here to cancel'" [textAreaPlaceholder]="'Please provide the reason'"
    [primaryBtnTooltip]="'Click here to '+ modalActionBtnName?.toLowerCase() +' the disclosure.'">
    <!-- modal header -->
    <ng-container header>
        <span>{{modalActionBtnName}} {{ COMMON_DISCL_LOCALIZE.TERM_TRAVEL }} Disclosure</span>
        <app-common-help-text *ngIf="confirmationModalHelpText"
            [helpTextHardCoded]="confirmationModalHelpText"></app-common-help-text>
    </ng-container>

    <!-- modal content -->
    <ng-container content>
        <p *ngIf="modalActionBtnName == 'Submit'" class="fs-14 mb-0 mt-2">
            Are you sure you want to <strong class="text-lowercase">{{modalActionBtnName}} </strong> this disclosure with engagement <strong>{{travelDisclosure?.personEntity?.coiEntity?.entityName}}</strong>?
        </p>
    </ng-container>
</app-confirmation-modal>

<!-- assign admin modal -->
<app-assign-administrator-modal *ngIf="isAddAssignModalOpen" [defaultAdminDetails]="defaultAdminDetails"
    [path]="'TRAVEL_DISCLOSURES'" (closeModal)="closeAssignAdministratorModal($event)"
    [disclosureId]="travelDisclosure?.travelDisclosureId" [actionType]="travelDisclosure?.adminPersonId ? 'R' : 'A'" [currentAssignedAdminId]="travelDisclosure?.adminPersonId">
</app-assign-administrator-modal>

<div *ngIf="isShowCompleteDisclHistory">
    <app-complete-disclosures-history-slider [disclosureDetails]="travelDisclosure" (closePage)="closeCompleteDisclosureHistorySlider($event)"> </app-complete-disclosures-history-slider>
</div>

<!-- person link sliders -->
<ng-container *ngIf="isShowPersonSlider">
    <app-person-related-sliders (closePage)="closePersonSlider($event)" for="TRAVEL_DISCLOSURE"
        [personId]="userDetails.personId" [sliderType]="selectedPersonSliderType" [personName]="userDetails.fullName">
    </app-person-related-sliders>
</ng-container>

<!-- form validator -->
<div class="coi-custom-form-validator">
    <app-form-validator [validationList]="validationList" [defaultFormPath]="validationPath"
    [validationConfig]="travel_service.validationConfig" [isTabEmitNeeded]="true"></app-form-validator>
</div>

<!-- Travel-details engagement check modal -->
<app-common-modal [modalConfig]="engagementValidationModalConfig" (modalAction)="postConfirmation($event)">
    <ng-container modal-header>
        <span>Validation</span>
    </ng-container>
    <ng-container modal-body>
        <p class="fs-14 mb-0 mt-2 ms-2">Please select an engagement before proceeding with travel details.</p>
    </ng-container>
</app-common-modal>

<app-common-modal [modalConfig]="fcoiModalConfig" (modalAction)="postFCOIModalConfirmation($event)" >
    <ng-container modal-header>
        <span>{{disclosureModalDetails.modalHeader}}</span>
    </ng-container>
    <ng-container modal-body>
        <div class="d-flex align-items-center justify-content-between alert alert-primary mt-1 mb-0 py-2 gap-2">
            <div class="d-flex">
                <!-- icon -->
                <mat-icon class="mat-icon material-icons flex-shrink-0" aria-hidden="true">info</mat-icon>
                <!-- text -->
                <p class="fs-14 mb-0 ms-2"><span [innerHTML]="disclosureModalDetails?.message"></span></p>
            </div>
        </div>
        <!-- Temporarily commenting out the comment text area as it's not required in the current requirements, but may be needed in the future. -->
        <!-- <ng-container *ngIf="!disclosureModalDetails.isView">
            <label for="disclsoure-modal-comment" class="fw-600 fs-14 col-12 mt-3"
            [attr.aria-label]="'please enter the comment it is mandatory'">
            <span class="text-danger pe-1">*</span>
            <span>Comment</span>
        </label>
        <div class="col-12">
            <textarea id="disclsoure-modal-comment" appAutoGrow rows="1" appLengthValidator [isShowLimiter]='true'
                [limit]=2000 class="form-control fs-14" autocomplete="off" [(ngModel)]="disclosureDescription"
                [ngClass]="(disclosureMandatoryList?.get('description')) ? 'invalid-border':''" placeholder="Please enter description">
            </textarea>
            <span *ngIf="disclosureMandatoryList?.has('description')" class="fs-13 invalid-feedback d-block position-absolute">
                {{disclosureMandatoryList?.get('description')}}
            </span>
        </div>
        </ng-container> -->
    </ng-container>
</app-common-modal>

<div *ngIf="isShowCreateEngSlider">
    <app-add-sfi-slider [(isOpenSlider)]="isShowCreateEngSlider"></app-add-sfi-slider>
</div>

<app-coi-print-modal *ngIf="printModalConfig.isOpenPrintModal" [printModalConfig]="printModalConfig" (modalClosed)="printModalClosed()"></app-coi-print-modal>

