<div #editorElementRef tabindex="-1" class="d-flex flex-column gap-2 pb-1">
    <!-- CKEditor -->
    <div class="col rounded-3 overflow-hidden coi-review-comments-editor"
        [class.coi-invalid-feedback-border]="mandatoryList.has('comment')">
        <ckeditor [(ngModel)]="commentEditorConfig.commentDetails.comment" [editor]="commentEditorConfig.editor" [config]="commentEditorConfig.editorConfig"
            (ready)="onReady($event)" (ngModelChange)="commentChanged()"></ckeditor>
    </div>
    <!-- Error -->
    <div *ngIf="mandatoryList.has('comment')" class="position-relative">
        <span class="position-absolute invalid-feedback d-block fs-12 mt-0 coi-custom-top-n5px">{{ mandatoryList?.get('comment') }} </span>
    </div>
    <div class="d-flex flex-wrap gap-2">
        <!-- Checkbox Section -->
        <div *ngIf="commentEditorConfig?.checkboxConfig?.length" class="d-flex align-items-center flex-wrap gap-3 col">
            <ng-container *ngFor="let checkBoxItem of commentEditorConfig?.checkboxConfig; let idx = index">
                <ng-container *ngIf="!checkBoxItem?.hideComponentTypes?.includes(commentEditorConfig.commentDetails.componentTypeCode)">
                    <div class="d-flex align-items-center col-auto rounded-3">
                        <input type="checkbox" id="coi-RevC-{{ idx }}-checkbox" [(ngModel)]="isChecked[idx]"
                            class="coi-text-dark border border-secondary cursor-pointer me-2"
                            title="Click here to {{ isChecked[idx] ? 'unselect' : 'select' }} {{ checkBoxItem?.label }}"
                            aria-label="Click here to {{ isChecked[idx] ? 'unselect' : 'select' }} {{ checkBoxItem?.label }}">
                        <label for="coi-RevC-{{ idx }}-checkbox" class="coi-text-dark cursor-pointer">{{ checkBoxItem?.label }}</label>
                    </div>
                </ng-container>
            </ng-container>
        </div>
        <!-- Action Buttons -->
        <div class="d-flex align-items-center gap-2 col-auto ms-auto">
            <!-- Cancel -->
            <button class="btn btn-outline-secondary coi-btn-sm fs-14" type="button" (click)="cancelEditor()"
                title="Click here to cancel editor" aria-label="Click here to cancel editor">
                Cancel
            </button>
            <!-- Clear -->
            <button class="btn btn-outline-secondary coi-btn-sm fs-14" type="button" (click)="clearEditor()"
                title="Click here to clear editor" aria-label="Click here to clear editor">
                Clear
            </button>
            <!-- Add/Edit Button -->
            <button class="btn btn-primary coi-btn-sm fs-14" type="button" (click)="addOrUpdateComment()"
                title="Click here to {{ btnName?.toLowerCase()}}" attr.aria-label="Click here to {{ btnName?.toLowerCase()}}">
                {{ btnName }}
            </button>
        </div>
    </div>
</div>
