<div class="card matching-card {{customClass}}">
    <div class="card-body" id="coi-entity-management-card-body">
        <div class="row gy-3">
            <!-- header -->
            <div class="d-flex flex-wrap col-12 mb-3 gap-3 gap-md-5">
                <h4 class="d-flex align-items-center flex-grow-1 mb-0 coi-text-darker fs-6 pe-md-5">
                    <!-- icon -->
                    <span class="coi-icon-bg me-2 fs-14 d-inline-flex"><mat-icon aria-hidden="true"
                            class="coi-entity-icon-size coi-coloured-icons">domain</mat-icon></span>
                    <!-- Engagement Name -->
                    <div class="d-flex flex-column">
                        <div class="d-flex align-items-center">
                            <span class="text-slice fs-6" [title]="engagementDetails?.entityName">{{
                                engagementDetails?.entityName }}</span>
                        </div>
                    </div>
                </h4>
                <button class="btn btn-outline-secondary d-flex align-items-center fs-14"
                    (click)="handleCardAction('VIEW')" aria-label="Click here to view legacy engagement data"
                    title="Click here to view legacy engagement data"
                    id="coi-legacy-engagement-view-btn-{{engagementDetails?.engagementId}}">
                    <mat-icon aria-hidden="true" class="me-1">visibility</mat-icon>View Legacy Data
                </button>
            </div>
            <!-- body -->
            <ng-container>
                <!-- Relationship Type -->
                <div tabindex="-1" class="col-lg-4 col-md-6 col-12"
                    [attr.aria-label]="'Relationship Type is ' + (engagementDetails?.relationshipType ? engagementDetails?.relationshipType : 'empty')">
                    <span class="d-block coi-text-dark">Relationship Type</span>
                    <div id="relationship-Type-id{{engagementDetails?.engagementId}}" class="text-slice">
                        <app-no-data-label [valueToShow]="engagementDetails?.relationshipType">
                            <span [title]="'#' + engagementDetails?.relationshipType"
                                class="coi-text-light">{{engagementDetails?.relationshipType}}</span>
                        </app-no-data-label>
                    </div>
                </div>
                <!-- Entity Type -->
                <div tabindex="-1" class="col-lg-4 col-md-6 col-12"
                    [attr.aria-label]="'Entity Type is ' + (engagementDetails?.entityType ? engagementDetails?.entityType : 'empty')">
                    <span class="d-block coi-text-dark">Entity Type</span>
                    <div id="entity-Type-id{{engagementDetails?.engagementId}}" class="text-slice">
                        <app-no-data-label [valueToShow]="engagementDetails?.entityType">
                            <span [title]="engagementDetails?.entityType" class="coi-text-light">{{
                                engagementDetails?.entityType }}</span>
                        </app-no-data-label>
                    </div>
                </div>
                <!-- Ownership Type -->
                <div tabindex="-1" class="col-lg-4 col-md-6 col-12"
                    [attr.aria-label]="'Ownership Type is ' + (engagementDetails?.ownershipType ? engagementDetails?.ownershipType : 'empty')">
                    <span class="d-block coi-text-dark">Ownership Type</span>
                    <div id="Ownership-Type-id{{engagementDetails?.engagementId}}" class="text-slice">
                        <app-no-data-label [valueToShow]="engagementDetails?.ownershipType">
                            <span [title]="engagementDetails?.ownershipType" class="coi-text-light">{{
                                engagementDetails?.ownershipType }}</span>
                        </app-no-data-label>
                    </div>
                </div>
            </ng-container>
        </div>
    </div>

    <!-- footer -->
    <div *ngIf="isShowFooter" class="card-footer d-flex flex-wrap justify-content-end gap-2 align-items-center py-2">
        <!-- Exclude -->
        <button *ngIf="engagementDetails?.migrationStatus === 'TO REVIEW' && isShowExcludeBtn"
            id="migrated-engagement-exclude-btn-{{engagementDetails?.engagementId}}"
            (click)="handleCardAction('EXCLUDE')" aria-label="Click here to exclude"
            class="btn btn-outline-secondary d-flex align-items-center fs-14" title="Click here to exclude">
            Exclude
        </button>
        <!-- Proceed -->
        <button *ngIf="engagementDetails?.migrationStatus === 'TO REVIEW' || engagementDetails?.migrationStatus === 'IN PROGRESS'"
            id="migrated-engagement-proceed-btn-{{engagementDetails?.engagementId}}"
            (click)="handleCardAction('PROCEED')" aria-label="Click here to proceed"
            class="btn btn-primary d-flex align-items-center fs-14" title="Click here to proceed">
            Proceed
        </button>
        <!-- Revert -->
        <button *ngIf="engagementDetails?.migrationStatus === 'EXCLUDED'"
            id="migrated-engagement-revert-btn-{{engagementDetails?.engagementId}}" (click)="handleCardAction('REVERT')"
            aria-label="Click here to revert" class="btn btn-primary d-flex align-items-center fs-14"
            title="Click here to revert">
            Revert
        </button>
    </div>
</div>
