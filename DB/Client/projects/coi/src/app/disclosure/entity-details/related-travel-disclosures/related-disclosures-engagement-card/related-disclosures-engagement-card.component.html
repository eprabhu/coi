<div *ngIf="disclosureItem?.travelDisclosureId" class="card coi-card-regular position-relative shadow-sm"
    [ngClass]="{'coi-card-highlight-footer' : isCurrentDisclosure}">
    <div class="card-body">
        <div class="row">
            <div class=" d-inline-flex align-items-end col-12 mb-2 coi-card-body-notch-container">
                <span class="d-flex align-items-center">
                    <span class="coi-card-notch-ribbon shadow-sm bg-travel-clip">{{ COMMON_DISCL_LOCALIZE.TRAVEL_BADGE_PREFIX }}Travel</span>
                </span>
                <h4 class="text-slice fs-14 mb-1 ms-1" title="{{disclosureItem?.travelTitle}}">
                    {{disclosureItem?.travelTitle}}
                </h4>
            </div>
            <div class="col-lg-8 col-xl-9 mb-3 mb-lg-0 mb-md-3 px-0">
                <div class="row mx-0">
                    <ng-container *ngFor="let fieldOrder of travelEngagementCardOrder">
                        <div *ngIf="fieldOrder === 'TRAVEL_DATE'" class="col-md-6 col-lg-4 mb-2">
                            <span class="coi-text-dark d-block" id="coi-eng-travel-date-{{disclosureItem?.travelDisclosureId}}">
                                <ng-container i18n="@@TRAVEL_DATE">Travel Date</ng-container>
                            </span>
                            <div id="coi-engagement-travel-travel-date-{{disclosureItem?.travelDisclosureId}}"
                                class="text-slice">
                                <app-no-data-label
                                    [valueToShow]="disclosureItem?.travelStartDate || disclosureItem?.travelEndDate">
                                    <span class="coi-text-light ms-0">{{disclosureItem?.travelStartDate | dateFormatter}}</span>
                                    -
                                    <span class="coi-text-light">{{disclosureItem?.travelEndDate | dateFormatter}}</span>
                                </app-no-data-label>
                            </div>
                        </div>
                        <div *ngIf="fieldOrder === 'REIMBURSED_COST'" class="col-md-6 col-lg-4 mb-2">
                            <span class="coi-text-dark d-block"
                                id="coi-eng-travel-reimbursement-cost-{{disclosureItem?.travelDisclosureId}}">
                                <ng-container i18n="@@TRAVEL_REIMBURSED_COST">Reimbursed Cost</ng-container>
                            </span>
                            <div id="coi-engagement-travel-reimbursement-cost-{{disclosureItem?.travelDisclosureId}}"
                                class="text-slice">
                                <app-no-data-label [valueToShow]="disclosureItem?.reimbursedCost">
                                    <span class="coi-text-light ms-0"
                                        aria-label="disclosureItem?.reimbursedCost">{{ disclosureItem?.reimbursedCost | customCurrency }}</span>
                                </app-no-data-label>
                            </div>
                        </div>
                        <div *ngIf="fieldOrder === 'CERTIFICATION_DATE'" class="col-md-6 col-lg-4 mb-2">
                            <span class="coi-text-dark d-block me-2"
                                id="coi-eng-travel-certification-date-{{disclosureItem?.travelDisclosureId}}"><ng-container i18n="@@TRAVEL_CERTIFICATION_DATE">Certification Date</ng-container></span>
                            <div id="coi-engagement-travel-certification-date-{{disclosureItem?.travelDisclosureId}}"
                                class="text-slice">
                                <app-no-data-label
                                    [valueToShow]="disclosureItem?.certifiedAt">
                                    <span class="d-flex coi-text-light ms-0"
                                        aria-label="{{disclosureItem?.certifiedAt| dateFormatter}}">
                                        <span class="text-slice"
                                            [title]="disclosureItem?.certifiedAt| dateFormatter">{{disclosureItem?.certifiedAt|
                                            dateFormatter}}</span>
                                    </span>
                                </app-no-data-label>
                            </div>
                        </div>
                        <div *ngIf="fieldOrder === 'ADMINISTRATOR'" class="col-md-6 col-lg-4 mb-2">
                            <span class="coi-text-dark d-block"
                                id="coi-eng-travel-admin-{{disclosureItem?.travelDisclosureId}}">
                                <ng-container i18n="@@TRAVEL_ADMINISTRATOR">Administrator</ng-container>
                            </span>
                            <div id="coi-engagement-travel-admin-{{disclosureItem?.travelDisclosureId}}"
                                class="text-slice">
                                <app-no-data-label [valueToShow]="disclosureItem?.adminPersonName">
                                    <span class="coi-text-light ms-0">{{disclosureItem?.adminPersonName}}</span>
                                </app-no-data-label>
                            </div>
                        </div>
                        <div *ngIf="fieldOrder === 'ADMIN_GROUP'" class="col-md-6 col-lg-4 mb-2">
                            <span class="coi-text-dark d-block"
                                id="coi-engagement-travel-admin-group-{{disclosureItem?.travelDisclosureId}}">
                                <ng-container i18n="@@TRAVEL_ADMIN_GROUP">Admin Group</ng-container>
                            </span>
                            <div id="coi-engagement-travel-admin-group-{{disclosureItem?.travelDisclosureId}}"
                                class="text-slice">
                                <app-no-data-label [valueToShow]="disclosureItem?.adminGroupName">
                                    <span class="coi-text-light ms-0"
                                        aria-label="disclosureItem?.adminGroupName">{{disclosureItem?.adminGroupName}}</span>
                                </app-no-data-label>
                            </div>
                        </div>
                        <div *ngIf="fieldOrder === 'COUNTRY'" class="col-md-6 col-lg-4 mb-2">
                            <span class="coi-text-dark d-block me-2"
                                id="coi-eng-travel-country-{{disclosureItem?.travelDisclosureId}}">
                                <ng-container i18n="@@TRAVEL_COUNTRY">Country</ng-container>
                            </span>
                            <span>
                                <app-no-data-label [valueToShow]="disclosureItem?.destinations">
                                    <div *ngIf="disclosureItem?.destinations?.length" id="coi-engagement-travel-country-{{disclosureItem?.travelDisclosureId}}"
                                        class="coi-file-chip-container">
                                        <ng-container *ngFor="let destination of disclosureItem?.destinations; let nameIndex = index; let last = last">
                                            <ng-container *ngIf="(nameIndex < 3) || isShowAllCountries">
                                                <span class="coi-file-chips rounded-pill">
                                                    <span class="me-1 fs-12">{{destination}}</span>
                                                </span>
                                            </ng-container>
                                            <!-- view more / less -->
                                            <button *ngIf="last && disclosureItem?.destinations?.length > 3"
                                                class="coi-btn-halo rounded-pill d-inline-flex fs-12"
                                                title="Click here to read {{ isShowAllCountries ? 'less' : 'more' }}"
                                                attr.aria-label="Click here to read {{ isShowAllCountries ? 'less' : 'more' }}"
                                                (click)="isShowAllCountries = !isShowAllCountries">
                                                <span>{{isShowAllCountries ? 'View Less' : ('+' + (
                                                    disclosureItem?.destinations?.length - 3 ) + ' More')}}</span>
                                            </button>
                                        </ng-container>
                                    </div>
                                </app-no-data-label>
                            </span>
                        </div>
                        <div *ngIf="fieldOrder === 'PURPOSE'" class="col-md-6 col-lg-4 mb-2">
                            <span class="coi-text-dark d-block me-2"
                                id="coi-eng-travel-purpose-{{disclosureItem?.travelDisclosureId}}">
                                <ng-container i18n="@@TRAVEL_PURPOSE">Purpose</ng-container>
                            </span>
                            <div id="coi-engagement-travel-purpose-{{disclosureItem?.travelDisclosureId}}"
                                class="text-slice">
                                <app-no-data-label
                                    [valueToShow]="disclosureItem?.purposeOfTheTrip">
                                    <span class="d-flex coi-text-light ms-0"
                                        aria-label="{{disclosureItem?.purposeOfTheTrip}}">
                                        <span class="text-slice"
                                            [title]="disclosureItem?.purposeOfTheTrip">{{disclosureItem?.purposeOfTheTrip}}</span>
                                    </span>
                                </app-no-data-label>
                            </div>
                        </div>
                    </ng-container>
                </div>
            </div>
            <div class="d-flex col-lg-4 col-xl-3 d-lg-block mb-3">
                <div class="d-flex d-xxl-block col-lg-auto col-md-12 coi-box-purple p-2">
                    <div class="flex-grow-1 lh-sm mb-2">
                        <span class="coi-text-lighter d-block"
                        id="coi-eng-travel-review-status-{{disclosureItem?.travelDisclosureId}}"><ng-container
                                i18n="@@TRAVEL_DISCLOSURE_REVIEW_STATUS">Review Status</ng-container></span>
                        <span>
                            <app-no-data-label [valueToShow]="disclosureItem?.reviewStatusCode">
                                <span
                                    class="{{travelReviewStatusBadge[disclosureItem?.reviewStatusCode] || 'red-badge'}}">
                                </span>
                                <span class="coi-text-dark" [attr.aria-label]="disclosureItem?.reviewStatus">
                                    {{disclosureItem?.reviewStatus}}
                                </span>
                            </app-no-data-label>
                        </span>
                    </div>
                    <div class="flex-grow-1 lh-sm mb-2">
                        <span class="coi-text-lighter d-block" id="coi-eng-travel-disclosure-status-{{disclosureItem?.travelDisclosureId}}">
                            <ng-container i18n="@@DISCLOSURE_DOCUMENT">Disclosure Status</ng-container></span>
                        <span>
                            <app-no-data-label [valueToShow]="disclosureItem?.documentStatusCode">
                                <span
                                    class="{{travelDocumentStatusBadge[disclosureItem?.documentStatusCode] || 'yellow-badge'}}">
                                </span>
                                <span class="coi-text-dark"
                                    [attr.aria-label]="disclosureItem?.documentStatusDescription">
                                    {{disclosureItem?.documentStatusDescription}}
                                </span>
                            </app-no-data-label>
                        </span>
                    </div>

                </div>
            </div>
        </div>
    </div>
    <!-- Footer section -->
    <div class="card-footer">
        <div class="row">
            <div class="col-lg-10">
                <div class="row align-items-center">
                    <div class="col-8" tabindex="-1">
                        <span class="d-inline-flex coi-text-lighter d-lg-block fs-13"
                            id="coi-travel-last-updated">Last
                            Updated By</span>
                        <span id="coi-admin-dash-travel-last-updated" class="coi-text-dark fs-13 fw-normal"
                            [attr.aria-label]="disclosureItem?.updateUser + ' on ' +
                                  (disclosureItem?.updateTimestamp | dateFormatterWithTimeZone: 'long')">
                            {{disclosureItem?.updateUserFullName}}<span class="coi-text-lighter fs-13"> On
                            </span>{{disclosureItem?.updateTimestamp | dateFormatterWithTimeZone: 'long'}}</span>
                    </div>
                </div>
            </div>
            <div *ngIf="!isCurrentDisclosure" class="col col-lg-2 d-flex justify-content-end align-items-center">
                <div class="d-flex d-inline-block justify-content-center justify-content-lg-end px-0">
                    <button class="d-flex align-items-center btn btn-outline-secondary fs-14 height-fit-content"
                        (click)="redirectToDisclosure()" title="Click here to view {{ COMMON_DISCL_LOCALIZE.TERM_TRAVEL }} Disclosure"
                        attr.aria-label="Click here to view {{ COMMON_DISCL_LOCALIZE.TERM_TRAVEL }} Disclosure">
                        <mat-icon class="me-1" aria-hidden="true">visibility</mat-icon>
                        <span>View</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
