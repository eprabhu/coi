<!-- New card header start-->
<section class="d-flex flex-column coi-disclosure-section">
    <div class="row gap-2 coi-bg-body" id="COI-DISCLOSURE-HEADER"
     [class.header-sticky]="!router.url.includes('coi/create-disclosure/relationship') && !router.url.includes('coi/disclosure/summary')">
        <div class="col-12">
            <!-- new top card -->
            <div class="card coi-card-expanded">
                <div class="row mx-0">
                    <div class="col-lg px-0">
                        <div class="card-header px-3 border-0">
                            <div class="row flex-grow-1 position-relative m-0">
                                <div class="d-flex col-12 px-0 coi-card-header-notch-container">
                                    <!-- badge - project -->
                                    <div *ngIf="fcoiTypeCode == DISCLOSURE_TYPE.PROJECT" class="col-auto d-flex mb-auto p-0"
                                        [attr.aria-label]="COMMON_DISCL_LOCALIZE.PROJECT_BADGE_PREFIX + coiData?.coiDisclosure?.coiProjectType?.description + ' disclosure'">
                                        <span [style.backgroundColor]="coiData?.coiDisclosure?.coiProjectType?.badgeColor"
                                            class="coi-card-notch-ribbon shadow-sm">{{ COMMON_DISCL_LOCALIZE.PROJECT_BADGE_PREFIX }}{{ coiData?.coiDisclosure?.coiProjectType?.description }}</span>
                                    </div>
                                    <!-- badge - fcoi -->
                                    <div *ngIf="fcoiTypeCode != DISCLOSURE_TYPE.PROJECT "class="col-auto d-flex mb-auto p-0"
                                        [attr.aria-label]="COMMON_DISCL_LOCALIZE.ANNUAL_BADGE_PREFIX + coiData?.coiDisclosure?.coiDisclosureFcoiType?.description +' disclosure'">
                                        <span class="coi-card-notch-ribbon shadow-sm bg-fcoi-clip">{{ COMMON_DISCL_LOCALIZE.ANNUAL_BADGE_PREFIX }}{{ coiData?.coiDisclosure?.coiDisclosureFcoiType?.description }}</span>
                                    </div>
                                    <div class="col row m-0">
                                        <div class="col-12 d-flex justify-content-between p-0 flex-wrap">
                                            <!-- person -->
                                            <span class="d-flex align-items-center coi-text-light ms-2 mt-1 text-nowrap">
                                                <mat-icon aria-hidden="true"
                                                    class="fw-bolder coi-text-light flex-shrink-0 coi-mat-icon-size me-1">person</mat-icon>
                                                <a class="link-primary cursor-pointer text-slice" tabindex="0" (click)="openPersonDetailsModal(coiData)"
                                                    (keyup.enter)="openPersonDetailsModal(coiData)"
                                                    attr.aria-label="Click here to view details of {{coiData?.coiDisclosure?.person?.fullName}}"
                                                    title="Click here to view details of {{coiData?.coiDisclosure?.person?.fullName}}">{{coiData?.coiDisclosure?.person?.fullName}}
                                                </a>
                                            </span>
                                            <!-- links -->
                                            <div class="d-flex justify-content-end align-items-center f-14 ms-auto mt-auto me-3 flex-wrap">
                                                <!-- <span class="ms-2 me-2"  role="link"
                                                    [title]="0 ? 'Click here to view trainings' : ''"
                                                    [attr.aria-label]="0 ? 'Click here to view trainings' : ''"
                                                    [ngClass]="0 ? 'link-primary cursor-pointer' : 'coi-text-light text-decoration-none'" tabindex="-1">
                                                    Trainings({{0}})
                                                </span> | -->
                                                <a class="ms-2 me-2 fs-13" (click)="openSlider('ENTITY', coiData?.coiDisclosure?.personEntitiesCount)"
                                                    role="link" (keyup.enter)="openSlider('ENTITY', coiData?.coiDisclosure?.personEntitiesCount)"
                                                    [title]="coiData?.coiDisclosure?.personEntitiesCount ? 'Click here to view Engagements' : ''"
                                                    [attr.aria-label]="coiData?.coiDisclosure?.personEntitiesCount ? 'Click here to view Engagements' : ''"
                                                    [ngClass]="coiData?.coiDisclosure?.personEntitiesCount ? 'link-primary cursor-pointer' : 'coi-text-light text-decoration-none'"
                                                    [tabIndex]="coiData?.coiDisclosure?.personEntitiesCount > 0 ? 0 : -1">
                                                    Engagements<ng-container *ngIf="coiData?.coiDisclosure?.personEntitiesCount">({{coiData?.coiDisclosure?.personEntitiesCount}})</ng-container>
                                                </a>
                                                <span *ngIf="canShowNotesLink"> | </span>
                                                <a *ngIf="canShowNotesLink" class="ms-2 me-2 fs-13" (click)="openSlider('NOTES', coiData?.coiDisclosure?.personNotesCount)" role="link"
                                                    (keyup.enter)="openSlider('NOTES', coiData?.coiDisclosure?.personNotesCount)"
                                                    [title]="(coiData?.coiDisclosure?.personNotesCount || canShowAddNoteBtn) ? 'Click here to view notes' : ''"
                                                    [attr.aria-label]="(coiData?.coiDisclosure?.personNotesCount || canShowAddNoteBtn) ? 'Click here to view notes' : ''"
                                                    [ngClass]="(coiData?.coiDisclosure?.personNotesCount || canShowAddNoteBtn) ? 'link-primary cursor-pointer' : 'coi-text-light text-decoration-none'"
                                                    [tabIndex]="(coiData?.coiDisclosure?.personNotesCount > 0 || canShowAddNoteBtn) ? 0 : -1" >
                                                    Notes<ng-container *ngIf="coiData?.coiDisclosure?.personNotesCount">({{coiData?.coiDisclosure?.personNotesCount}})</ng-container>
                                                </a>
                                                <span *ngIf="commonService.canShowReporterAttachments"> | </span>
                                                <a *ngIf="commonService.canShowReporterAttachments" class="ms-2 me-2 fs-13"
                                                    (click)="openSlider('ATTACHMENTS', coiData?.coiDisclosure?.personAttachmentsCount)" role="link"
                                                    (keyup.enter)="openSlider('ATTACHMENTS', coiData?.coiDisclosure?.personAttachmentsCount)"
                                                    [title]="coiData?.coiDisclosure?.personAttachmentsCount ? 'Click here to view attachments' : ''"
                                                    [attr.aria-label]="coiData?.coiDisclosure?.personAttachmentsCount ? 'Click here to view attachments' : ''"
                                                    [ngClass]="coiData?.coiDisclosure?.personAttachmentsCount ? 'link-primary cursor-pointer' : 'coi-text-light text-decoration-none'"
                                                    [tabIndex]="coiData?.coiDisclosure?.personAttachmentsCount > 0 ? 0 : -1">
                                                    Attachments<ng-container *ngIf="coiData?.coiDisclosure?.personAttachmentsCount">({{coiData?.coiDisclosure?.personAttachmentsCount}})</ng-container>
                                                </a>
                                                <ng-container *ngIf="isShowOverAllHistory">
                                                    <span>|</span>
                                                    <a class="ms-2 fs-13 link-primary cursor-pointer" id="coi-project-disc-overall-history"
                                                        (click)="openHistorySlider()" role="link"
                                                        (keyup.enter)="openHistorySlider()"
                                                        title='Click here to view entire disclosure history' attr.aria-label='Click here to view entire disclosure history' tabIndex="0">
                                                        Disclosure History
                                                    </a>
                                                </ng-container>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12 d-flex p-0 align-items-center">
                                    <!-- email -->
                                    <span class="d-flex align-items-center coi-text-light mt-1"
                                        [title]="coiData?.coiDisclosure?.person?.emailAddress">
                                        <mat-icon aria-hidden="true"
                                            class="fw-bolder coi-text-light flex-shrink-0 coi-mat-icon-size me-1">mail</mat-icon>
                                        <span class="text-slice">{{coiData?.coiDisclosure?.person?.emailAddress}}</span>
                                    </span>
                                    <!-- home unit -->
                                    <span class="d-flex align-items-center coi-text-light ms-3 mt-1"
                                        [title]="commonService.getPersonLeadUnitDetails(coiData?.coiDisclosure?.person?.unit)">
                                        <mat-icon aria-hidden="true"
                                            class="fw-bolder coi-text-light flex-shrink-0 coi-mat-icon-size me-1">home</mat-icon>
                                        <span class="text-slice">{{commonService.getPersonLeadUnitDetails(coiData?.coiDisclosure?.person?.unit)}}</span>
                                    </span>
                                    <!-- title -->
                                    <span class="d-flex align-items-center coi-text-light ms-3 mt-1" *ngIf="coiData?.coiDisclosure?.person?.primaryTitle"
                                        [title]="coiData?.coiDisclosure?.person?.primaryTitle">
                                        <mat-icon aria-hidden="true"
                                            class="fw-bolder coi-text-light flex-shrink-0 coi-mat-icon-size me-1">work</mat-icon>
                                        <span class="text-slice">{{coiData?.coiDisclosure?.person?.primaryTitle}}</span>
                                    </span>
                                </div>
                                <h3 *ngIf="fcoiTypeCode == DISCLOSURE_TYPE.PROJECT && coiData?.projectDetail" class="d-flex align-items-center fs-16 mb-0 mt-1 ps-0">
                                    <mat-icon aria-hidden="true" class="coi-text-light flex-shrink-0 me-1 coi-ms-n2px ">{{coiData?.projectDetail?.projectIcon}}</mat-icon>
                                    <a tabindex="0" class="link-primary fs-6 text-slice" id="fcoi-disclosure-project-link" (click)="openProjectHierarchySlider()"
                                        title="Click here to view details of #{{ coiData?.projectDetail?.projectNumber }} - {{ coiData?.projectDetail?.title }}"
                                        attr.aria-label="Click here to view details of #{{ coiData?.projectDetail?.projectNumber }} - {{ coiData?.projectDetail?.title }}"
                                        (keyup.enter)="openProjectHierarchySlider()">
                                        #{{ coiData?.projectDetail?.projectNumber }} - {{ coiData?.projectDetail?.title }}
                                    </a>
                                </h3>
                                <button (click)="collapseHeader()"
                                    title="Click here to collapse / expand" aria-label="Click here to collapse / expand"
                                    class="toggle-btn align-items-center border btn d-flex justify-content-center p-0 rounded-5 shadow-sm toggle-btn-position">
                                    <mat-icon aria-hidden="true" [ngClass]="isCardExpanded ? 'coi-rotate-180' : 'coi-rotate-0'">expand_more</mat-icon>
                                </button>
                            </div>
                        </div>
                        <div class="card-body" *ngIf="isCardExpanded">
                            <div class="row row-gap-4">
                                <div *ngIf="isShowAdminDetails" class="col-12 col-md-6 col-xxl-4">
                                    <div class="coi-box-red border border-secondary border-opacity-50 fw-medium p-3 rounded-1 h-100 position-relative">
                                        <span class="coi-text-darker fs-6 coi-field-set">Details</span>
                                        <div class="row">
                                            <div class="col-md-6 col-lg-6 col-xl-12 col-xxl-12 mt-2 pe-0">
                                                <label for="disclosure-administrator" class="coi-text-dark d-block">
                                                    <i aria-hidden="true" class="fa fa-user-o fw-700 me-1"></i>
                                                    <span>Administrator</span>
                                                </label>
                                                <span id="disclosure-administrator" class="coi-text-light">
                                                    <app-no-data-label [valueToShow]="coiData?.coiDisclosure?.adminPersonName">
                                                    <span>{{coiData?.coiDisclosure?.adminPersonName}}</span>
                                                </app-no-data-label></span>
                                            </div>
                                            <div class="col-md-6 col-lg-6 col-xl-12 col-xxl-12 mt-2 pe-0">
                                                <label for="disclosure-admin-group" class="coi-text-dark d-block">
                                                    <img alt="add-adminGroup icon" class="activity-icon" src="assets/images/multiple-admin-1.svg">
                                                    <span>Admin Group</span>
                                                </label>
                                                <span id="disclosure-admin-group" class="coi-text-light">
                                                    <app-no-data-label [valueToShow]="coiData?.coiDisclosure?.adminGroupId">
                                                        <span>{{coiData?.coiDisclosure?.adminGroupName}}</span>
                                                    </app-no-data-label>
                                                </span>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                                <div [ngClass]="isShowAdminDetails ? 'col-12 col-md-6 col-xxl-4' : 'col-12 col-md-6'">
                                    <div class="coi-box-red border border-secondary border-opacity-50 fw-medium p-3 rounded-1 h-100 position-relative">
                                        <span class="coi-text-darker fs-6 coi-field-set">Dates</span>
                                        <div class="row">
                                            <div [ngClass]="(fcoiTypeCode !== DISCLOSURE_TYPE.PROJECT || coiProjectTypeCode === PROJECT_TYPE.AWARD) ? 'col-6 col-md-6 col-xl-6 col-xxl-6' : 'col-6 col-sm-6 col-xl-12 col-xxl-12'" class="mt-2 pe-0">
                                                <label for="disclosure-date-create" class="coi-text-dark d-block">Create</label>
                                                <span id="disclosure-date-create" class="coi-text-light">
                                                    <app-no-data-label [valueToShow]="coiData?.coiDisclosure?.createTimestamp">
                                                        <span>{{coiData?.coiDisclosure?.createTimestamp | dateFormatterWithTimeZone}}</span>
                                                    </app-no-data-label>
                                                </span>
                                            </div>
                                            <div [ngClass]="(fcoiTypeCode !== DISCLOSURE_TYPE.PROJECT || coiProjectTypeCode === PROJECT_TYPE.AWARD) ? 'col-6 col-md-6 col-xl-6 col-xxl-6' : 'col-6 col-sm-6 col-xl-12 col-xxl-12'" class="mt-2 pe-0">
                                                <label for="disclosure-date-certification" class="coi-text-dark d-block"><ng-container i18n="@@COMMON_SUBMISSION">Certification</ng-container></label>
                                                <span id="disclosure-date-certification" class="coi-text-light">
                                                    <app-no-data-label [valueToShow]="coiData?.coiDisclosure?.certifiedAt">
                                                        <span>{{coiData?.coiDisclosure?.certifiedAt | dateFormatterWithTimeZone}}</span>
                                                    </app-no-data-label>
                                                </span>
                                            </div>
                                            <div *ngIf="fcoiTypeCode !== DISCLOSURE_TYPE.PROJECT || coiProjectTypeCode === PROJECT_TYPE.AWARD" class="col-6 col-md-4 col-lg-4 col-xl-6 col-xxl-6 mt-2 pe-0">
                                                <label for="disclosure-date-expiration" class="coi-text-dark d-block">Expiration</label>
                                                <span id="disclosure-date-expiration" class="coi-text-light">
                                                    <app-no-data-label [valueToShow]="coiData?.coiDisclosure?.expirationDate">
                                                        <span class="d-flex gap-2">
                                                            <span>{{ coiData?.coiDisclosure?.expirationDate | dateFormatterWithTimeZone }}</span>
                                                            <ng-container *ngIf="coiData?.coiDisclosure?.isExtended">
                                                                <app-common-extended-badge></app-common-extended-badge>
                                                            </ng-container>
                                                        </span>
                                                    </app-no-data-label>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div [ngClass]="isShowAdminDetails ? 'col-12 col-lg col-xxl-4' : 'col-12 col-md-6'">
                                    <div class="coi-box-red border border-secondary border-opacity-50 fw-medium p-3 rounded-1 h-100 position-relative">
                                        <span class="coi-text-darker fs-6 coi-field-set">Status</span>
                                        <div class="row">
                                            <div class="col-3 col-md-6 col-xl-6 col-xxl-6 mt-2 pe-0">
                                                <label for="disclosure-status-disclosure" class="coi-text-lighter d-block"><ng-container i18n="@@DISCLOSURE_STATUS_DISCLOSURE">Disclosure</ng-container></label>
                                                <span id="disclosure-status-disclosure" class="coi-text-light">
                                                    <app-no-data-label [valueToShow]="coiData?.coiDisclosure?.coiConflictStatusType?.description">
                                                        <span class="{{disclosureConflictStatusBadge[coiData?.coiDisclosure?.conflictStatusCode] || 'yellow-badge'}}"></span>
                                                        <span class="coi-text-dark ms-1">{{coiData?.coiDisclosure?.coiConflictStatusType?.description}}</span>
                                                    </app-no-data-label>
                                                </span>
                                            </div>
                                            <div class="col-3 col-md-6 col-xl-6 col-xxl-6 mt-2 pe-0">
                                                <label for="disclosure-status-review" class="coi-text-lighter d-block"><ng-container i18n="@@COI_DISCLOSURE_REVIEW_STATUS">Review</ng-container></label>
                                                <span id="disclosure-status-review" class="coi-text-light">
                                                    <app-no-data-label [valueToShow]="coiData?.coiDisclosure?.coiReviewStatusType?.description">
                                                        <span class="{{coiReviewStatusBadge[coiData?.coiDisclosure?.coiReviewStatusType?.reviewStatusCode] || 'red-badge'}}"></span>
                                                        <span class="coi-text-dark ms-1">{{coiData?.coiDisclosure?.coiReviewStatusType?.description}}</span>
                                                    </app-no-data-label>
                                                </span>
                                            </div>
                                            <div class="col-3 col-md-6 col-xl-6 col-xxl-6 mt-2 pe-0">
                                                <label for="disclosure-status-disposition" class="coi-text-lighter d-block"><ng-container i18n="@@DISCLOSURE_DISPOSITION">Disposition</ng-container></label>
                                                <span id="disclosure-status-disposition" class="coi-text-light">
                                                    <app-no-data-label [valueToShow]="coiData?.coiDisclosure?.coiDispositionStatusType?.description">
                                                        <span class="{{coiDispositionStatusBadge[coiData?.coiDisclosure?.coiDispositionStatusType?.dispositionStatusCode] || 'yellow-badge'}}"></span>
                                                        <span class="coi-text-dark ms-1">{{coiData?.coiDisclosure?.coiDispositionStatusType?.description}}</span>
                                                    </app-no-data-label>
                                                </span>
                                            </div>
                                            <div *ngIf="commonService.isShowEntityComplianceRisk" class="col-3 col-md-6 col-xl-6 col-xxl-6 mt-2 pe-0">
                                                <label for="disclosure-risk-level" class="coi-text-lighter d-block">Risk</label>
                                                <span id="disclosure-risk-level" class="coi-text-light">
                                                    <app-no-data-label [valueToShow]="coiData?.coiDisclosure?.coiRiskCategory?.description">
                                                        <span class="d-flex">
                                                            <mat-icon aria-hidden="true"
                                                                class="{{disclosureRiskBadge[coiData?.coiDisclosure?.riskCategoryCode] || 'red-badge'}} material-icons-round me-1 flex-shrink-0">warning</mat-icon>
                                                            <span class="coi-text-dark">{{coiData?.coiDisclosure?.coiRiskCategory?.description}}</span>
                                                        </span>
                                                    </app-no-data-label>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 p-3 action-header-border">
                        <div class="h-100" *ngIf="isCreateMode">
                            <div class="d-flex flex-wrap gap-2">
                                <!-- back button -->
                                <button (click)="routeToAdminOrUserDashboard()" id="fcoi-disclosure-back-btn"
                                    class="btn btn-outline-grey d-inline-flex align-items-center justify-content-center col fs-14"
                                    title="Click here to close" aria-label="Click here to close">
                                    <mat-icon aria-hidden="true">close</mat-icon>
                                    <span class="ms-2">Close</span>
                                </button>
                                <!-- comments -->
                                <button *ngIf="isShowCommentButton" id="fcoi-disclosure-general-comment-btn" (click)="openReviewComment()"
                                    title="Click here to open review comments" aria-label="Click here to open review comments"
                                    class="btn btn-outline-grey d-inline-flex align-items-center justify-content-center col fs-14 text-nowrap">
                                    <mat-icon aria-hidden="true">rate_review</mat-icon>
                                    <span class="ms-2">All Comments</span>
                                    <span *ngIf="coiData?.disclosureCommentsCount?.totalCount > 0">({{ coiData?.disclosureCommentsCount?.totalCount > 99 ? '99+' : coiData?.disclosureCommentsCount?.totalCount }})</span>
                                </button>
                                <!-- more option -->
                                <ng-container>
                                    <!-- more option btn -->
                                    <button [matMenuTriggerFor]="beforeMenu" id="fcoi-disclosure-more-action-btn"
                                        class="btn btn-outline-grey d-inline-flex align-items-center justify-content-center col"
                                        title="Click here for more actions" aria-label="Click here for more actions">
                                        <mat-icon aria-hidden="true" class="moreActionIcon">more_vert</mat-icon>
                                    </button>

                                    <!-- more options -->
                                    <mat-menu #beforeMenu="matMenu" xPosition="before">
                                        <!-- Print -->
                                        <button mat-menu-item id="fcoi-disclosure-print-btn"
                                            title="Click here to print disclosure" aria-label="Click here to print disclosure"
                                            (click)="openPrintDisclosureModal()"
                                            class="text-nowrap border-0 rounded-0 btn btn-primary-icon fs-14 d-flex justify-content-start w-100 align-items-center more-action">
                                            <mat-icon aria-hidden="true">print</mat-icon>
                                            <span class="ms-1 fw-medium fs-14">Print Disclosure</span>
                                        </button>
                                    </mat-menu>
                                </ng-container>
                                <div class="d-inline-flex align-items-center justify-content-center flex-wrap gap-2 col-12 px-0">
                                    <!-- Previous -->
                                    <button *ngIf="coiService.stepsNavBtnConfig?.previousBtnConfig?.isShowBtn" (click)="goToPrevStep()"
                                        id="coi-travel-prev-btn" [disabled]="coiService.stepsNavBtnConfig?.previousBtnConfig?.isDisabled"
                                        class="d-inline-flex align-items-center justify-content-center btn btn-outline-grey col fs-14"
                                        [attr.aria-label]="coiService.stepsNavBtnConfig?.previousBtnConfig?.ariaLabel"
                                        [title]="coiService.stepsNavBtnConfig?.previousBtnConfig?.isDisabled ? 'The button is disabled' : coiService.stepsNavBtnConfig?.previousBtnConfig?.title">
                                        <mat-icon aria-hidden="true">{{ coiService.stepsNavBtnConfig?.previousBtnConfig?.matIcon }}</mat-icon>
                                        <span class="ms-2">{{ coiService.stepsNavBtnConfig?.previousBtnConfig?.btnName }}</span>
                                    </button>
                                    <!-- Proceed -->
                                    <button *ngIf="coiService.stepsNavBtnConfig?.proceedBtnConfig?.isShowBtn" (click)="goToStep()"
                                        id="coi-travel-proceed-btn" [disabled]="coiService.stepsNavBtnConfig?.proceedBtnConfig?.isDisabled"
                                        class="d-inline-flex align-items-center justify-content-center btn btn-outline-grey col fs-14"
                                        [attr.aria-label]="coiService.stepsNavBtnConfig?.proceedBtnConfig?.ariaLabel"
                                        [title]="coiService.stepsNavBtnConfig?.proceedBtnConfig?.isDisabled ? 'The button is disabled' : coiService.stepsNavBtnConfig?.proceedBtnConfig?.title">
                                        <span class="me-2">{{ coiService.stepsNavBtnConfig?.proceedBtnConfig?.btnName }}</span>
                                        <mat-icon aria-hidden="true" class="coi-rotate-180">{{ coiService.stepsNavBtnConfig?.proceedBtnConfig?.matIcon }}</mat-icon>
                                    </button>
                                    <!-- Add Engagement -->
                                    <button *ngIf="(coiData?.coiDisclosure?.coiProjectType?.coiProjectTypeCode != PROJECT_TYPE.AWARD ) && (router.url.includes(disclosureURls.ENGAGEMENT) || router.url.includes(disclosureURls.RELATIONSHIP))"
                                        title="Click here to add new engagement" aria-label="Click here to add new engagement" id="fcoi-disclosure-create-engagement-btn"
                                        class="d-inline-flex justify-content-center align-items-center fs-14 btn {{router.url.includes('create-disclosure/sfi') ? 'btn-primary' : 'btn-outline-grey'}} col"
                                        (click)="coiService.isOpenEngagementCreateSlider = true">
                                        <mat-icon aria-hidden="true">add</mat-icon>
                                        <span class="ms-2 text-nowrap">Add Engagement</span>
                                    </button>
                                    <!-- Submit -->
                                    <button *ngIf="router.url.includes(disclosureURls.CERTIFICATION) && dataStore.getEditModeForCOI()"
                                        (click)="checkQuestionnaireCompletedBeforeCertify()" [disabled]="!coiService.isCertified"
                                        title="Click here to submit disclosure" aria-label="Click here to submit disclosure"
                                        class="btn btn-primary d-inline-flex align-items-center justify-content-center fs-14 col"
                                        id="fcoi-disclosure-submit-btn">
                                        <mat-icon aria-hidden="true">done</mat-icon>
                                        <span class="ms-2">Submit</span>
                                    </button>
                                    <div *ngIf="isCardExpanded" class="{{isCardExpanded ? 'mt-3' : 'mt-0'}} col-12">
                                        <label for="coi-last-update" class="coi-text-lighter fs-13 fw-medium d-block">Last Updated By</label>
                                        <span id="coi-last-update" class="coi-text-dark fs-13 fw-normal">{{coiData?.coiDisclosure?.updateUserFullName}}
                                            <span class="coi-text-lighter fs-13 fw-medium"> On </span>{{coiData?.coiDisclosure?.updateTimestamp | dateFormatterWithTimeZone:'long'}} </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="h-100" *ngIf="!isCreateMode">
                            <div class="d-grid d-md-flex flex-md-wrap gap-2">
                                <!-- back button -->
                                <button (click)="routeToAdminOrUserDashboard()" id="fcoi-disclosure-back-btn"
                                    class="btn btn-outline-grey d-inline-flex align-items-center justify-content-center col fs-14"
                                    title="Click here to close" aria-label="Click here to close">
                                    <mat-icon aria-hidden="true">close</mat-icon>
                                    <span class="ms-2">Close</span>
                                </button>
                                <!-- Comments -->
                                <button *ngIf="isShowCommentButton" id="fcoi-disclosure-general-comment-btn" (click)="openReviewComment()"
                                    title="Click here to open review comments" aria-label="Click here to open review comments"
                                    class="btn btn-outline-grey d-inline-flex align-items-center justify-content-center col fs-14 text-nowrap">
                                    <mat-icon aria-hidden="true">rate_review</mat-icon>
                                    <span class="ms-2">All Comments</span>
                                    <span *ngIf="coiData?.disclosureCommentsCount?.totalCount > 0">({{ coiData?.disclosureCommentsCount?.totalCount > 99 ? '99+' : coiData?.disclosureCommentsCount?.totalCount }})</span>
                                </button>
                                <!-- more option -->
                                <ng-container>
                                    <!-- more option btn -->
                                    <button [matMenuTriggerFor]="beforeMenu" id="fcoi-disclosure-more-action-btn"
                                        class="btn btn-outline-grey d-inline-flex align-items-center justify-content-center col"
                                        title="Click here for more actions" aria-label="Click here for more actions">
                                        <mat-icon aria-hidden="true" class="moreActionIcon">more_vert</mat-icon>
                                    </button>

                                    <!-- more options -->
                                    <mat-menu #beforeMenu="matMenu" xPosition="before">
                                        <!-- Reassign Admin -->
                                        <button *ngIf="isShowReAssignAdmin" mat-menu-item id="fcoi-disclosure-reassign-btn" (click)="openAddAssignModal();"
                                            title="Click here to reassign administrator/admin group" aria-label="Click here to reassign administrator/admin group"
                                            class="text-nowrap border-0 rounded-0 btn-primary-icon fs-14 d-flex justify-content-start w-100 align-items-center more-action">
                                            <mat-icon aria-hidden="true">group_add</mat-icon>
                                            <span class="ms-2 fw-medium fs-14">Reassign Admin</span>
                                        </button>
                                        <!-- Modify Risk -->
                                        <button *ngIf="isShowModifyRisk" mat-menu-item id="fcoi-disclosure-modify-risk-btn" (click)="openRiskSlider();"
                                            title="Click here to modify risk" aria-label="Click here to modify risk"
                                            class="text-nowrap border-0 rounded-0 btn-primary-icon fs-14 d-flex justify-content-start w-100 align-items-center more-action">
                                            <mat-icon aria-hidden="true" class="material-icons-round">warning</mat-icon>
                                            <span class="ms-2 mt-1 fw-medium fs-14">Modify Risk</span>
                                        </button>
                                        <!-- Recalled option only shown for reviewStatusCode(2-submitted)-->
                                        <!-- check logged person & disclosure created person is same -->
                                        <button *ngIf="isShowWithdrawDisclosure" mat-menu-item id="fcoi-disclosure-recall-btn"
                                            title="Click here to Recall disclosure" aria-label="Click here to Recall disclosure"
                                            (click)="isActionAllowed('Recall', withdrawHelpTexts, withdrawErrorMsg, withdrawModalHelpText);"
                                            class="text-nowrap border-0 rounded-0 btn btn-primary-icon fs-14 d-flex justify-content-start w-100 align-items-center more-action">
                                            <mat-icon aria-hidden="true">logout</mat-icon>
                                            <span class="ms-2 fw-medium fs-14">Recall</span>
                                            </button>
                                        <!-- Recall Request button  -->
                                        <button *ngIf="isShowWithdrawRequest" mat-menu-item id="fcoi-disclosure-recall-request-btn"
                                            title="Click here to request to recall the disclosure" aria-label="Click here to request to recall the disclosure"
                                            (click)="openConfirmationModal(COMMON_DISCL_LOCALIZE.TERM_REQUEST_RECALL, withdrawRequestHelpTexts, withdrawRequestErrorMsg, withdrawModalHelpText);"
                                            class="text-nowrap border-0 rounded-0 btn btn-primary-icon fs-14 d-flex justify-content-start w-100 align-items-center more-action">
                                            <mat-icon aria-hidden="true">cancel_schedule_send</mat-icon>
                                            <span class="ms-2 fw-medium fs-14" >{{COMMON_DISCL_LOCALIZE.TERM_REQUEST_RECALL}}</span>
                                        </button>

                                        <!-- Return to pi -->
                                        <!-- reviewStatusCode-(3-Review In Progress, 7-Review Assigned, 8-Assigned Review Completed) -->
                                        <!-- Check logged person and administrator are same -->
                                        <button *ngIf="isShowReturnDIsclosure" mat-menu-item id="fcoi-disclosure-return-btn"
                                            title="Click here to return disclosure" aria-label="Click here to return disclosure"
                                            (click)="isActionAllowed('Return', returnHelpTexts, returnErrorMsg, returnModalHelpText);"
                                            class="text-nowrap border-0 rounded-0 btn btn-primary-icon fs-14 d-flex justify-content-start w-100 align-items-center more-action">
                                            <mat-icon aria-hidden="true" class="returnIcon">refresh</mat-icon>
                                            <span class="ms-1 fw-medium fs-14">Return</span>
                                        </button>

                                        <!-- Print -->
                                        <button mat-menu-item id="fcoi-disclosure-print-btn"
                                            title="Click here to print disclosure" aria-label="Click here to print disclosure"
                                            (click)="openPrintDisclosureModal()"
                                            class="text-nowrap border-0 rounded-0 btn btn-primary-icon fs-14 d-flex justify-content-start w-100 align-items-center more-action">
                                            <mat-icon aria-hidden="true">print</mat-icon>
                                            <span class="ms-1 fw-medium fs-14">Print Disclosure</span>
                                        </button>
                                    </mat-menu>
                                </ng-container>
                                <!-- Assign Admin -->
                                <ng-container *ngIf="isShowAssignAdmin">
                                    <button title="Click here to assign administrator/admin group" aria-label="Click here to assign administrator/admin group"
                                        class="fs-14 btn btn-primary d-inline-flex justify-content-center w-100 align-items-center {{isCardExpanded? 'col-12' : 'col'}}"
                                        (click)="openAddAssignModal();" id="fcoi-disclosure-assign-admin-btn">
                                        <mat-icon aria-hidden="true">group_add</mat-icon>
                                        <span class="ms-2 text-nowrap">Assign Admin</span>
                                    </button>
                                </ng-container>
                                <div *ngIf="isShowApproveDisapproveBtn" class="d-flex align-items-center col-12 gap-2">
                                    <!-- Return -->
                                    <button id="coi-routing-disapprove-btn"
                                        class="d-inline-flex align-items-center justify-content-center btn btn-outline-grey col fs-14"
                                        title="Click here to return disclosure" aria-label="Click here to return disclosure"
                                        (click)="disapproveOPARouting()">
                                        <mat-icon aria-hidden="true" class="returnIcon">refresh</mat-icon>
                                        <span class="ms-2">Return</span>
                                    </button>
                                    <!-- Approve -->
                                    <button id="coi-routing-approve-btn"
                                        class="d-inline-flex align-items-center justify-content-center btn btn-primary col fs-14"
                                        title="Click here to approve disclosure" aria-label="Click here to approve disclosure"
                                        (click)="routingAction('APPROVE')">
                                        <mat-icon aria-hidden="true">done</mat-icon>
                                        <span class="ms-2">Approve</span>
                                    </button>
                                </div>                              
                                <!-- Revise -->
                                <ng-container *ngIf="isShowReviseButton">
                                    <button class="d-inline-flex justify-content-center align-items-center fs-14 btn btn-success w-100 {{isCardExpanded? 'col-12' : 'col'}}" 
                                        (click)="handleFCOICreation('REVISION')" title="Click here to revise disclosure" aria-label="Click here to revise disclosure"
                                        id="coi-user-discl-notpending-revise-btn">
                                        <mat-icon aria-hidden="true" class="me-1 flex-shrink-0">restart_alt</mat-icon>
                                        <span>Revise</span>
                                    </button>
                                </ng-container>

                                <button *ngIf="coiService.isStartReview && coiData?.coiDisclosure?.coiReviewStatusType?.reviewStatusCode === '7' && dataStore.getEditModeForCOI() && !coiData?.coiDisclosure?.withdrawalRequested"
                                    title="Click here to start review" aria-label="Click here to start review"
                                    (click)="updateCoiReview('START')"
                                    id="fcoi-disclosure-start-review-btn"
                                    [ngClass]="isCardExpanded? 'col-12' : 'col'"
                                    class="fs-14 btn btn-primary d-flex justify-content-center w-100 align-items-center">
                                    <mat-icon aria-hidden="true" class="material-icons-outlined">play_circle_filled</mat-icon>
                                    <span class="ms-2 text-nowrap">Start Review</span>
                                </button>

                                <button *ngIf="coiService.isCompleteReview && coiData?.coiDisclosure?.coiReviewStatusType?.reviewStatusCode === '7' && dataStore.getEditModeForCOI() && !coiData?.coiDisclosure?.withdrawalRequested"
                                    title="Click here to complete review" aria-label="Click here to complete review" (click)="updateCoiReview('COMPLETE')"
                                    id="fcoi-disclosure-complete-review-btn"
                                    [ngClass]="isCardExpanded? 'col-12' : 'col'"
                                    class="fs-14 btn btn-primary d-flex justify-content-center w-100 align-items-center">
                                    <mat-icon aria-hidden="true" class="material-icons-outlined">stop_circle</mat-icon>
                                    <span class="ms-2 text-nowrap">Complete Review</span>
                                </button>
                                <button *ngIf="isShowCompleteFinalReviewBtn"
                                    class="fs-14 btn btn-primary d-flex justify-content-center w-100 align-items-center"
                                    [ngClass]="isCardExpanded? 'col-12' : 'col'" title="Click here to complete final review"
                                    aria-label="Click here to complete final review" id="disclosure-complete-final-review-btn"
                                    data-bs-target="#completeReviewModalFromDashboard" data-bs-toggle="modal">
                                    <mat-icon aria-hidden="true">done</mat-icon>
                                    <span class="ms-2 text-nowrap">Complete Final Review</span>
                                </button>
                                <div *ngIf="isCardExpanded" class="{{isCardExpanded ? 'mt-3' : 'mt-0'}} col-12">
                                    <label for="coi-last-update" class="coi-text-lighter fs-13 fw-medium d-block">Last Updated By</label>
                                    <span id="coi-last-update" class="coi-text-dark fs-13 fw-normal">{{coiData?.coiDisclosure?.updateUserFullName}}
                                        <span class="coi-text-lighter fs-13 fw-medium"> On </span>{{coiData?.coiDisclosure?.updateTimestamp | dateFormatterWithTimeZone:'long'}} </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- new top card ends -->
        </div>
        <!-- view mode -->
        <ng-container *ngIf="!isCreateMode">
            <div class="col-12">
                <div class="coi-navigation-tabs d-flex align-items-center">
                    <div [routerLink]="isCreateMode ? ['screening'] : ['summary']" (click)="onTabSwitch('disclosure')"
                        class="navigation-box border-end" queryParamsHandling='merge' role="button" id="fcoi-disclosure-summary-tab">
                        <div class="navigation-box-content" [ngClass]="{'active' : isDisclosureTabActive}"
                            [attr.aria-label]="router.url.includes('coi/disclosure/summary') ? 'Disclosure' : 'Click here to view the Disclosure'"
                            [title]="router.url.includes('coi/disclosure/summary') ? 'Disclosure' : 'Click here to view the Disclosure'"
                            aria-label="Click here to view the disclosure screening form">Disclosure</div>
                    </div>
                    <div *ngIf="canShowAttachmentTab" [routerLink]="['disclosure-attachment']" (click)="onTabSwitch('disclosure-attachment')"
                        class="d-flex align-items-center cursor-pointer navigation-box border-end gap-1" queryParamsHandling='merge' role="button" id="fcoi-disclosure-summary-attachments-tab">
                        <div class="navigation-box-content" routerLinkActive="active"
                        [attr.aria-label]="router.url.includes('coi/disclosure/disclosure-attachment') ? 'Attachments' : 'Click here to view the Attachments'"
                        [title]="router.url.includes('coi/disclosure/disclosure-attachment') ? 'Attachments' : 'Click here to view the Attachments'">Attachments</div>
                        <span *ngIf="coiData?.coiDisclosure?.disclosureAttachmentsCount" class="d-inline-flex align-items-center justify-content-center fs-10 count-badge badge rounded-pill rounded-circle">
                            {{ coiData?.coiDisclosure?.disclosureAttachmentsCount }}
                        </span>
                    </div>
                    <div *ngIf="canShowReviewerTab" [routerLink]="['review']"
                        (click)="onTabSwitch('review')" class="navigation-box border-end" queryParamsHandling='merge' role="button" id="fcoi-disclosure-summary-reviews-tab">
                        <div class="navigation-box-content" routerLinkActive="active"
                        [attr.aria-label]="router.url.includes('coi/disclosure/review') ? 'Reviews' : 'Click here to view the Reviews'"
                        [title]="router.url.includes('coi/disclosure/review') ? 'Reviews' : 'Click here to view the Reviews'">Reviews</div>
                    </div>
                    <div *ngIf="isShowRouteLogTab" [routerLink]="['route-log']"
                        (click)="onTabSwitch('route-log')" class="navigation-box border-end" queryParamsHandling='merge' role="button" id="fcoi-discl-route-log-tab">
                        <div class="navigation-box-content" routerLinkActive="active"
                        [attr.aria-label]="router.url.includes('coi/disclosure/route-log') ? 'Route Log' : 'Click here to view the Route Log'"
                        [title]="router.url.includes('coi/disclosure/route-log') ? 'Route Log' : 'Click here to view the Route Log'">Route Log</div>
                    </div>
                    <div [routerLink]="['history']" (click)="onTabSwitch('history')" class="navigation-box" queryParamsHandling='merge'
                        role="button" id="fcoi-disclosure-summary-history-tab"
                        [attr.aria-label]="router.url.includes('coi/disclosure/history') ? 'History' : 'Click here to view the History'"
                        [title]="router.url.includes('coi/disclosure/history') ? 'History' : 'Click here to view the History'">
                        <div class="navigation-box-content" routerLinkActive="active">History</div>
                    </div>
                </div>
            </div>
        </ng-container>
        <!-- create mode -->
        <ng-container *ngIf="isCreateMode">
            <div class="col-12">
                <div class="steps-outer">
                    <ul class="steps py-2 mb-0 ps-0 gap-3 gap-lg-4 gap-xxl-2 flex-grow-1">
                        <li>
                            <a class="step-pills"
                                [class.completed-step]="isRouteComplete(['sfi', 'relationship', 'certification'])" [class.active-tab]="isRouteComplete(['screening'])"
                                tabindex="0" id="step_1" (click)="goToStep(1);" (keyup.enter)="goToStep(1);"
                                [attr.aria-label]="router.url.includes('coi/create-disclosure/screening') ? 'Screening Questionnaire' : 'Click here to view the Screening Questionnaire'"
                                [title]="router.url.includes('coi/create-disclosure/screening') ? 'Screening Questionnaire' : 'Click here to view the Screening Questionnaire'">
                                <span class="plls-icon"><mat-icon aria-hidden="true" class="mat-step-icon">question_mark</mat-icon></span>
                                <span class="plls-text d-none d-xxl-inline">Screening Questionnaire</span>
                            </a>
                        </li>
                        <li><span class="arrow-right"
                                [class.active-arrow]="isRouteComplete(['screening', 'sfi', 'relationship', 'certification'])"><i
                                    class="fa fa-angle-right" aria-hidden="true"></i> <i class="fa fa-angle-right"
                                    aria-hidden="true"></i></span></li>
                        <li>
                            <a class="step-pills"
                                [class.completed-step]="isRouteComplete(['relationship', 'certification'])" [class.active-tab]="isRouteComplete(['sfi'])"
                                tabindex="0" id="step_2" (click)="goToStep(2);" (keyup.enter)="goToStep(2);"
                               [attr.aria-label]="router.url.includes('coi/create-disclosure/sfi') ? 'Engagements' : 'Click here to view the Engagements section'"
                                [title]="router.url.includes('coi/create-disclosure/sfi') ? 'Engagements' : 'Click here to view the Engagements section'">
                                <span class="plls-icon"><mat-icon aria-hidden="true" class="mat-step-icon">apartment</mat-icon></span>
                                <span class="plls-text d-none d-xxl-inline">Engagements</span>
                            </a>
                        </li>
                        <li><span class="arrow-right"
                                [class.active-arrow]="isRouteComplete(['sfi', 'relationship', 'certification'])"><i
                                    class="fa fa-angle-right" aria-hidden="true"></i> <i class="fa fa-angle-right"
                                    aria-hidden="true"></i></span></li>
                        <li>
                            <a class="step-pills" [class.completed-step]="isRouteComplete(['certification'])" [class.active-tab]="isRouteComplete(['relationship'])"
                                tabindex="0" id="step_3" (click)="goToStep(3);" (keyup.enter)="goToStep(3);"
                                [attr.aria-label]="router.url.includes('coi/create-disclosure/relationship') ? 'Relationship' : 'Click here to view the Relationships section'"
                                [title]="router.url.includes('coi/create-disclosure/relationship') ? 'Relationship' : 'Click here to view the Relationships section'">
                                <span class="plls-icon"><mat-icon aria-hidden="true" class="mat-step-icon">handshake</mat-icon></span>
                                <span class="plls-text d-none d-xxl-inline">Relationships</span>
                            </a>
                        </li>
                        <li><span class="arrow-right"
                                [class.active-arrow]="isRouteComplete(['relationship', 'certification'])"><i
                                    class="fa fa-angle-right" aria-hidden="true"></i> <i class="fa fa-angle-right"
                                    aria-hidden="true"></i></span></li>
                        <li>
                            <a class="step-pills" [class.active-tab]="isRouteComplete(['certification'])"
                                tabindex="0" id="step_4" (click)="goToStep(4);" (keyup.enter)="goToStep(4);"
                                [attr.aria-label]="router.url.includes('coi/create-disclosure/certification') ? 'Certification' : 'Click here to view the Certification section'"
                                [title]="router.url.includes('coi/create-disclosure/certification') ? 'Certification' : 'Click here to view the Certification section'">
                                <span class="plls-icon"><mat-icon aria-hidden="true" class="mat-step-icon">military_tech</mat-icon></span>
                                <span class="plls-text d-none d-xxl-inline">Certification</span>
                            </a>
                        </li>
                    </ul>
                    <div class="position-relative d-flex align-items-center ms-auto">
                        <!-- save toast and loader -->
                        <div class="saved-toast-position invisible py-1 align-items-center badge d-inline-flex fw-normal fs-13 px-2 rounded-5 text-bg-light-success"
                            id="success-toast">
                            <span class="me-1">Last saved at {{ autoSaveService.lastSavedTime }}</span>
                            <mat-icon aria-hidden="true" class="coi-success-icon">cloud_done</mat-icon>
                        </div>
                        <div *ngIf="commonService?.autoSaveSavingSpinner !== 'HIDE'" id="inprogress-toast"
                            class="saved-toast-position py-1 align-items-center d-inline-flex fw-normal px-2 rounded-5">
                            <span class="me-1 fs-14">Saving...</span>
                            <mat-icon aria-hidden="true" class="text-success fw-600 coi-rotating">autorenew</mat-icon>
                        </div>
                    </div>
                    <!-- additional tabs -->
                    <div class="d-inline-flex align-items-center align-items-stretch gap-3 ms-auto ps-3 border-start">
                        <!-- attachment -->
                        <div class="d-flex align-items-center">
                            <button type="button" id="fcoi-disclosure-attachment-tab" title="Click here to view disclosure attachment"
                                aria-label="Click here to view disclosure attachment"
                                [class.coi-active-step-tab]="isRouteComplete(['disclosure-attachment'])" class="btn-none coi-step-tab-btn"
                                (click)="onTabSwitch('disclosure-attachment')" [routerLink]="['disclosure-attachment']"
                                queryParamsHandling='merge'>
                                <span aria-hidden="true" class="coi-step-tab-icon"><mat-icon
                                        class="coi-rotate-minus-45 mat-step-icon flex-shrink-0">attach_file</mat-icon></span>
                                <span class="d-none d-xxl-inline coi-step-tab-text" [attr.coi-step-tab-text]="'Attachments'">Attachments</span>
                            </button>
                        </div>
                        <span class="coi-section-separator pe-1"></span>
                        <!-- Route Log -->
                        <div *ngIf="isShowRouteLogTab" class="d-flex align-items-center">
                            <button type="button" id="fcoi-disclosure-routelog-tab" title="Click here to view disclosure route log"
                                aria-label="Click here to view disclosure route log"
                                [class.coi-active-step-tab]="isRouteComplete(['route-log'])" class="btn-none coi-step-tab-btn"
                                (click)="onTabSwitch('route-log')" [routerLink]="['route-log']"
                                queryParamsHandling='merge'>
                                <span aria-hidden="true" class="coi-step-tab-icon"><mat-icon
                                        class="mat-step-icon flex-shrink-0">call_split</mat-icon></span>
                                <span class="d-none d-xxl-inline coi-step-tab-text" [attr.coi-step-tab-text]="'Route Log'">Route Log</span>
                            </button>
                        </div>
                        <span *ngIf="isShowRouteLogTab" class="coi-section-separator pe-1"></span>
                        <!-- history -->
                         <div class="d-flex align-items-center">
                             <button type="button" id="fcoi-disclosure-history-tab"
                                 title="Click here to view disclosure history"
                                 aria-label="Click here to view disclosure history"
                                 [class.coi-active-step-tab]="isRouteComplete(['history'])"
                                 class="btn-none coi-step-tab-btn" (click)="onTabSwitch('history')"
                                 [routerLink]="['history']" queryParamsHandling='merge'>
                                 <span aria-hidden="true" class="coi-step-tab-icon"><mat-icon class="mat-step-icon flex-shrink-0">update</mat-icon></span>
                                 <span class="d-none d-xxl-inline coi-step-tab-text" [attr.coi-step-tab-text]="'History'">History</span>
                             </button>
                         </div>
                    </div>
                </div>
            </div>
        </ng-container>
        <!--navigation-step-end-->
    </div>
    <!-- New card header ends-->
    <div class="coi-bg-body pt-2 z-index-2"></div>
    <div [class.pb-4]="isCreateMode">
        <router-outlet></router-outlet>
        <app-coi-steps-navigation (stepNavAction)="stepNavAction($event)" [stepsNavBtnConfig]="coiService.stepsNavBtnConfig"></app-coi-steps-navigation>
    </div>
</section>

<div *ngIf="coiService.isOpenEngagementCreateSlider">
    <app-add-sfi-slider [(isOpenSlider)]="coiService.isOpenEngagementCreateSlider"></app-add-sfi-slider>
</div>

<ng-container *ngIf="showSlider">
    <app-person-related-sliders (closePage)="closeHeaderSlider($event)" for="FCOI_DISCLOSURE"
        [personId]="coiData.coiDisclosure?.personId" [sliderType]="selectedType" [isShowRiskLevel]="dataStore.isShowEngagementRisk"
        [personName]="coiData.coiDisclosure?.person.fullName" [canShowAddNote]="canShowAddNoteBtn">
    </app-person-related-sliders>
</ng-container>

<!-- Complete review modal -->
<div class="modal modal-coi fade mySkinDialog" id="completeReviewModalFromDashboard"
    data-bs-backdrop="static" aria-label="Complete Review" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
            <div class="modal-header pe-0">
                <h4 class="modal-title">
                    <span>Complete Final Review</span>
                    <app-common-help-text [helpTextHardCoded]="completeReviewHelpText"></app-common-help-text>
                </h4>
                <button class="btn-close fs-12" data-bs-dismiss="modal" id="dissmiss-btn" (click)="clearCompleteReviewModal()"
                    type="button" id="coi-complete-final-review-close-btn" title="Click here to close" aria-label="Click here to close" >
                </button>
            </div>
            <div class="modal-body">
                <div class="row gap-3">
                    <app-person-project-entity-card [personProjectOrEntity]="personProjectDetails"></app-person-project-entity-card>
                    <!-- Description -->
                    <div class="col-12">
                        <label for="coi-complete-review-description" class="fw-600 fs-14 col-12 pb-1">
                            <span>Please provide your assessment of the disclosure</span>
                        </label>
                        <div class="col-12">
                            <textarea id="coi-complete-review-description" name="coi-complete-review-description" rows="4" appLengthValidator
                                [isShowLimiter]='true' [limit]="2000" class="form-control fs-14" autocomplete="off"
                                [(ngModel)]="reviewDescription" (ngModelChange)="reviewDescription = reviewDescription.trim()"
                                [placeholder]="'Please enter the description'">
                            </textarea>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline-secondary fs-14" (click)="clearCompleteReviewModal()"
                    data-bs-dismiss="modal" type="button" id="coi-complete-final-review-cancel-btn" title="Click here to cancel" aria-label="Click here to cancel" >Cancel
                </button>
                <button (click)="completeDisclosureReview()" class="btn btn-primary fs-14" data-bs-dismiss="modal"
                    type="button" id="coi-complete-final-review-cancel-btn" title="Click here to complete final review" aria-label="Click here to compelete final review" >Complete Final Review
                </button>
            </div>
        </div>
    </div>
</div>
<span class="d-none" id="reviewPendingCompleteReviewErrorModalTrigger"
    data-bs-target="#completeReviewModalFromDashboardErrorModal" data-bs-toggle="modal"></span>
<!-- Complete review modal -->
<div class="modal modal-coi fade mySkinDialog" id="completeReviewModalFromDashboardErrorModal" role="dialog" aria-label="Warning" tabindex="-1">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header pe-0">
                <h4 class="modal-title">Warning!</h4>
                <button aria-label="Click here to close" title="Click here to close" class="btn-close" data-bs-dismiss="modal" type="button">
                </button>
            </div>
            <div class="modal-body">
                <div class="row mt-2 mb-0">
                    <div class="col-lg-12">
                        <div class="alert alert-danger fs-14">
                            <i aria-hidden="true" class="fa fa-exclamation-circle icon text-danger mr-3"></i>
                            There still are some pending reviews for the reviewers to complete. Please wait until all
                            the reviews are completed.
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline-secondary fs-14" aria-label="Click here to close" title="Click here to close"
                    data-bs-dismiss="modal" type="button">Close
                </button>
            </div>
        </div>
    </div>
</div>

<!--assign reviewer modal start-->
<div class="modal modal-coi fade mySkinDialog" id="assign-reviewer-modal" role="dialog"
    aria-labelledby="coi-add-review-modal-header" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="coi-add-review-modal-header">Add Review for
                    {{coiData?.coiDisclosure?.coiDisclosureCategoryType?.description}} by
                    {{coiData?.coiDisclosure?.person?.fullName}}</h5>
                <button type="button" class="btn-close fs-12" data-bs-dismiss="modal" aria-label="Click here to close" title="Click here to close"
                    (click)="assignReviewerActionDetails = {}">
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-sm-12 col-12">
                        <label class="d-block">Assignee</label>
                        <app-elastic [options]="personElasticOptions" [clearField]="assigneeClearField"
                            [placeHolder]="'Search Assignee'" (selectedResult)="assigneeSelect($event)">
                        </app-elastic>
                    </div>
                    <div class="ml-2" *ngIf="assignReviewerActionValidation.has('reviewer')">
                        <span class="mandatory d-inline-block">{{assignReviewerActionValidation.get('reviewer')}}</span>
                    </div>
                </div>
                <div class="row mt-2">
                    <div class="col-12">
                        <label class="block-display">
                            Description</label>
                        <textarea [(ngModel)]="assignReviewerActionDetails.description" appLengthValidator
                            [isShowLimiter]="true" [limit]="2000" rows="2" class="form-control"></textarea>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline-secondary fs-14" data-bs-dismiss="modal" id="agreement-approve-close"
                    type="button" aria-label="Click here to close" title="Click here to close" (click)="assignReviewerActionDetails = {}">Close</button>
                <button id="agreement-approve-disapprove-btn" class="btn btn-primary fs-14"
                    (click)="saveOrUpdateCoiReview();" type="button" aria-label="Click here to Add" title="Click here to Add">Add</button>
            </div>
        </div>
    </div>
</div>
<span id="assign-reviewer-modal-trigger" data-bs-target="#assign-reviewer-modal" data-bs-toggle="modal"
    class="d-none"></span>
<!--assign reviewer modal end-->

<!--questionnaire evaluation message start-->
<span class="d-none" id="questionnaireEvaluationMessageModalTrigger"
    data-bs-target="#questionnaireEvaluationMessageModal" data-bs-toggle="modal"></span>
<div class="modal modal-coi fade mySkinDialog" id="questionnaireEvaluationMessageModal"
    role="dialog" aria-label="Screening Questionnaire" tabindex="-1">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header pe-0">
                <h4 class="modal-title">Screening Questionnaire</h4>
                <button aria-label="Click here to close" title="Click here to close" class="btn-close mx-3" data-bs-dismiss="modal" type="button">
                </button>
            </div>
            <div class="modal-body">
                <div class="row mt-2 mb-0">
                    <!-- <div class="col-lg-12">
                        <p class="fs-15">
                            {{sfiService.isSFIRequired ?
                            'Dear ' + commonService.getCurrentUserDetail('fullName') + ', based on the answers provided
                            by you to the questions you have to define at least one Engagements
                            against an entity before continuing with the disclosure.':
                            'Dear ' + commonService.getCurrentUserDetail('fullName') + ', based on the answers provided
                            to you to the questions you do not have to define any Engagements or
                            relationships against an entity and may submit the disclosure.'}}
                        </p>
                    </div> -->
                    <div class="col-lg-12">
                        <!-- <p class="fs-15">
                            {{sfiService.isSFIRequired ?'Dear ' + commonService.getCurrentUserDetail('fullName') + ',
                            based on the answers provided by you to the questions you have to define at least one
                            Engagements against an entity before continuing with the
                            disclosure.':'Dear ' + commonService.getCurrentUserDetail('fullName') + ', based on the
                            answers provided to you to the questions you do not have to define any Significant Financial
                            Interest or relationships against an entity and may submit the disclosure.'}}
                        </p> -->
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button aria-label="Click here to close" title="Click here to close"
                    class="btn btn-outline-secondary fs-14" data-bs-dismiss="modal" type="button">Close
                </button>
            </div>
        </div>
    </div>
</div>
<!--questionnaire evaluation message end-->

<!--Unsaved Changes confirmation Modal-->
<app-confirmation-modal [modalName] = "'disclosure-unsaved-changes-modal'" (secondaryBtnAction)="leavePageClicked()"
    [primaryBtnName]="'Stay On Page'" [secondaryBtnName]="'Leave Page'" (close)="stayOnPageClicked()">
    <!-- modal header -->
    <ng-container header>
        <span>Confirmation</span>
    </ng-container>
    <!-- modal content -->
    <div content>
        <p *ngIf="coiService.unSavedModules === 'Certification'" class="fs-14">Are you sure you want to leave the <strong>Certification </strong>page without submitting?</p>
        <p *ngIf="coiService.unSavedModules !== 'Certification'" class="fs-14">Are you sure you want to leave the page without saving?</p>
    </div>
</app-confirmation-modal>
<!--Unsaved Changes confirmation Modal end-->

<!--validation modal-->
<div class="modal fade mySkinDialog modal-lg" tabindex="-1" id="ValidatedModal" role="dialog"
    data-bs-backdrop="static" aria-label="Validation">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Validation</h5>
                <button type="button" (click)="coiService.submitResponseErrors = [];" class="btn-close" data-bs-dismiss="modal" aria-label="Click here to close"></button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <ng-container *ngIf="this.coiService.submitResponseErrors.length > 0">
                        <ng-container *ngFor="let error of coiService.submitResponseErrors">
                            <div role="alert" class="alert" [ngClass]="error.validationType == 'VW' ? 'alert-warning' : 'alert-danger'" role="alert">
                                <i class="fa fa-exclamation-circle icon me-2 fs-14" aria-hidden="true"></i>
                            <span class="fs-14">{{error.validationMessage}}</span></div>
                        </ng-container>
                    </ng-container>
                </div>
            </div>
            <div class="modal-footer">
                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal"
                        (click)="coiService.submitResponseErrors = [];">Close</button>
            </div>
        </div>
    </div>
</div>

<!--disclosure submit confirmation modal-->
<div class="modal fade mySkinDialog modal-md" tabindex="-1" id="confirmModal"
    role="dialog" aria-labelledby="coi-disclosure-submit-confirm-modal-header">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                    <strong id="coi-disclosure-submit-confirm-modal-header" title="{{coiData?.projectDetail?.title}}">
                        <div class="d-flex">
                            <span>Submit {{ disclosureTitle }}</span>
                            <span *ngIf="fcoiTypeCode != DISCLOSURE_TYPE.REVISION" class="ms-1">Disclosure</span>
                            <app-common-help-text [helpTextHardCoded]="submitHelpTexts"></app-common-help-text>
                        </div>
                    </strong>
                <button type="button" class="btn-close" title="Click here to close" data-bs-dismiss="modal" aria-label="Click here to close"
                    (click)="isSaving = false; coiService.submitResponseErrors = [];"></button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-12 mt-2">
                        <ng-container *ngIf="this.coiService.submitResponseErrors.length > 0">
                            <div class="text-danger" *ngFor="let error of coiService.submitResponseErrors">
                                <div *ngIf="error.validationType == 'VW'" role="alert"
                                    class="alert alert-warning fs-14" role="alert">
                                    <i class="fa fa-exclamation-circle me-2"></i>{{error.validationMessage}}
                                </div>
                            </div>
                        </ng-container>
                        <ng-container *ngIf="count > 0">
                            <div>
                                <p class="fs-14">Are you sure you want to submit the
                                    <!-- do not add space between the below strong and span.-->
                                    <strong>{{disclosureTitle}}</strong><span>{{ fcoiTypeCode != DISCLOSURE_TYPE.REVISION ? ' disclosure?' : '?'}}</span></p>
                            </div>
                        </ng-container>
                        <div *ngIf="count == 0">
                            <p class="fs-14">You are about to submit the
                                <!-- do not add space between the below strong and span.-->
                                <strong>{{disclosureTitle}}</strong><span>{{ fcoiTypeCode != DISCLOSURE_TYPE.REVISION ? ' disclosure without Engagements.' : ' without Engagements.'}}</span></p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline-secondary" id="prop-saveExit-dismiss-btn" data-bs-dismiss="modal"
                    type="button" aria-label="Click here to cancel" title="Click here to cancel" (click)="isSaving = false; coiService.submitResponseErrors = [];">Cancel
                </button>
                <button class="btn btn-primary me-0" id="prop-saveExit-dismiss-btn" type="button"
                    aria-label="Click here to submit" title="Click here to submit" data-bs-dismiss="modal" (click)="certifyDisclosure()">
                    Submit
                </button>
            </div>
        </div>
    </div>
</div>

<!-- count modal -->
<ng-container *ngIf="coiCountModal?.isOpenCountModal">
    <app-coi-count-modal [(coiCountModal)]="coiCountModal" (viewSlider)="viewSlider($event)"></app-coi-count-modal>
</ng-container>

<app-assign-administrator-modal *ngIf="isAddAssignModalOpen" (closeModal)="closeAssignAdministratorModal($event)"
    [disclosureId]="coiData?.coiDisclosure?.disclosureId" [currentAssignedAdminId]="coiData?.coiDisclosure?.adminPersonId" [defaultAdminDetails]="defaultAdminDetails" [actionType]="coiData?.coiDisclosure?.adminPersonId ? 'R' : 'A'">
</app-assign-administrator-modal>

<app-reviewer-action-modal *ngIf="coiService.isEnableReviewActionModal"></app-reviewer-action-modal>

<!--Disclosure Recall/Return Confirmation Modal-->
<app-confirmation-modal [modalName]="'disclosure-confirmation-modal'"
    (primaryBtnAction)="performDisclosureAction($event)" (secondaryBtnAction)="reopenValidationModal()"
    (close)="closeAction($event)" [primaryBtnName]="primaryBtnName" [modalSize]="'lg'"
    [textAreaLabelName]="'Reason for ' + textAreaLabelName" [helpText]="helpTexts" [needDescriptionField]="true"
    [isMandatory]="true" [descriptionErrorMsg]="descriptionErrorMsg"
    [primaryBtnTooltip]="'Click here to '+ primaryBtnName.toLowerCase() +' the disclosure.'"
    [secondaryBtnTooltip]="'Click here to cancel'">
    <!-- modal header -->
    <ng-container header>
        <span *ngIf="primaryBtnName !== 'Deny'">{{primaryBtnName}} {{disclosureTitle}}</span>
        <span *ngIf="primaryBtnName === 'Deny'">Deny Request to Recall</span>
        <span *ngIf="fcoiTypeCode != DISCLOSURE_TYPE.REVISION && primaryBtnName !== 'Deny'"
            class="ms-1">Disclosure</span>
        <app-common-help-text *ngIf="confirmationHelpTexts"
            [helpTextHardCoded]="confirmationHelpTexts"></app-common-help-text>
    </ng-container>
    <ng-container *ngIf="documentAction?.action === 'REVISE' && isShowWithdrawRequest" content>
        <app-common-shared-info-text [elementId]="'coi-disc-req-recall-info-text'" [subSectionId]="814"
            [customClass]="'p-2'"></app-common-shared-info-text>
    </ng-container>
</app-confirmation-modal>

<div *ngIf="isOpenRiskSlider">
    <app-disclosure-risk-slider [disclosureDetails]="coiData.coiDisclosure"
    (riskChange) = "changeDataStoreRisk($event)"
    [projectDetails]="coiData.projectDetail" (closePage)="closeSlider($event)"></app-disclosure-risk-slider>
</div>

<div *ngIf="isShowCompleteDisclHistory">
    <app-complete-disclosures-history-slider [disclosureDetails]="coiData.coiDisclosure" (closePage)="closeCompleteDisclosureHistorySlider($event)"> </app-complete-disclosures-history-slider>
</div>

<app-concurrency-warning-modal *ngIf="coiService.concurrentUpdateAction" [sectionName]="coiService.concurrentUpdateAction" (closePage)="cancelConcurrency()"></app-concurrency-warning-modal>

<app-validation-dock [validationList]="validationList" [validationDockModalConfig]="validationDockModalConfig" (emitActionEvent)="openReturnDenyConfirmationModal($event)"></app-validation-dock>

<!-- engagement slider -->
<ng-container *ngIf="coiService.coiEngagementSliderConfig?.personEntityId">
	<app-coi-slider (closeSlider)="coiService.closeEngagementSlider()" [elementId]="coiService.coiEngagementSliderConfig?.sliderElementId">
		<ng-container content>
			<app-entity-details [entityId]="coiService.coiEngagementSliderConfig?.personEntityId"></app-entity-details>
		</ng-container>
	</app-coi-slider>
</ng-container>

<!-- disclosure print  -->
<app-coi-print-modal *ngIf="printModalConfig.isOpenPrintModal" [printModalConfig]="printModalConfig" (modalClosed)="printModalClosed()"></app-coi-print-modal>

<!-- Routing Approve / Return Confirmation Modal -->
<app-common-modal [modalConfig]="workFlowConfirmModalConfig" (modalAction)="postWorkFlowConfirmation($event)">
    <ng-container modal-header>
        <span>{{ approveOrRejectWorkflowRO.actionType === 'A' ? 'Approve' : 'Return' }}</span>
        <span class="ms-1">{{ disclosureTitle }}</span>
        <span *ngIf="fcoiTypeCode != DISCLOSURE_TYPE.REVISION" class="ms-1">Disclosure</span>
    </ng-container>
    <ng-container modal-body>
        <div class="row row-gap-2">
            <!-- Text Box Comment -->
            <div class="col-12">
                <!-- Comment -->
                <label for="coi-wf-modal-confirm-reason" class="coi-text-dark pb-1"
                    [attr.aria-label]="'Please enter the reason for ' + (approveOrRejectWorkflowRO.actionType === 'A' ? 'approval' : 'return')">
                    <span class="text-danger pe-1">*</span>
                    <span>Reason for {{ approveOrRejectWorkflowRO.actionType === 'A' ? 'Approval' : 'Return' }}</span>
                    <app-common-help-text></app-common-help-text>
                </label>
                <div class="position-relative">
                    <!-- text box -->
                    <textarea id="coi-wf-modal-confirm-reason" rows="4" appLengthValidator [isShowLimiter]="true"
                        [limit]="2000" class="form-control fs-14" autocomplete="off"
                        [(ngModel)]="approveOrRejectWorkflowRO.approveComment"
                        (ngModelChange)="validateWorkFlowApproveReject()" [ngClass]="{ 'is-invalid d-block': workFlowMandatoryList?.has('COMMENT') }"
                        [placeholder]="'Please enter the reason for ' + (approveOrRejectWorkflowRO.actionType === 'A' ? 'approval' : 'return')">
                    </textarea>
                    <!-- error -->
                    <span *ngIf="workFlowMandatoryList?.has('COMMENT')" class="position-absolute d-block fs-13 invalid-feedback">{{ workFlowMandatoryList?.get('COMMENT') }}</span>
                </div>
            </div>

            <!-- Attachment -->
            <div class="col-12">
                <label for="coi-wf-modal-confirm-att" class="coi-text-dark pb-1"
                    [attr.aria-label]="'Please enter the reason for ' + (approveOrRejectWorkflowRO.actionType === 'A' ? 'approval' : 'return')">
                    <span>Add Files</span>
                    <app-common-help-text></app-common-help-text>
                </label>
                <!-- file drop -->
                <div>
                    <app-file-drop [multiple]="true" [fileAccept]="commonService.generalFileType"
                        (filesDropEvent)="fileDrop($event)"></app-file-drop>
                </div>
            </div>
            <!-- files -->
            <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                <div *ngIf="WorkflowUploadedFiles?.length" class="coi-file-chip-container">
                    <ng-container *ngFor="let file of WorkflowUploadedFiles; let fileIndex = index;">
                        <span class="coi-file-chips rounded-pill">
                            <span class="me-1 fs-12">{{file?.name}}</span>
                            <button id="coi-foreign-name-delete-{{fileIndex}}" class="d-flex btn-none"
                                (click)="deleteFromUploadedFileList(fileIndex)"
                                title="click here to remove file: {{file?.name}}"
                                attr.aria-label="click here to remove file: {{file?.name}}">
                                <mat-icon class="fileChips-close fs-13" aria-hidden="true">clear</mat-icon>
                            </button>
                        </span>
                    </ng-container>
                </div>
            </div>
            <!-- error -->
            <span *ngIf="attachmentErrorMsg" class="mandatory fs-14">{{ attachmentErrorMsg }}</span>
        </div>
    </ng-container>
</app-common-modal>
