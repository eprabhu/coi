INSERT INTO REPORT_TYPE_JOIN  (TYPE_JOIN_ID,TYPE_CODE,JOIN_QUERY,UPDATE_TIMESTAMP,UPDATE_USER) VALUES (1,'5','INNER JOIN ( SELECT A1.AWARD_ID, A1.AWARD_NUMBER, A1.ACCOUNT_NUMBER, T3.BUDGET_CATEGORY_CODE, A3.DESCRIPTION AS BUDGET_CATEGORY, T3.INTERNAL_ORDER_CODE AS IO_CODE, A4.DESCRIPTION AS COST_ELEMENT, -- FN_GET_ORG_BUD_AMT_FOR_L2WBS(A1.AWARD_NUMBER, T3.INTERNAL_ORDER_CODE) AS ORIGINAL_AMOUNT,  0 as ORIGINAL_AMOUNT,            -- T31.AMOUNT AS ORIGINAL_AMOUNT, T3.LINE_ITEM_COST AS REVISED_AMOUNT,  IFNULL(T4.TOTAL_EXPENSE_AMOUNT,0) AS EXPENDITURE_TO_DATE, IFNULL(T4.COMMITTED_AMOUNT,0) AS COMMITTED_AMOUNT, 0 AS TOTAL_REVENUE_AMOUNT,  IFNULL((T3.LINE_ITEM_COST),0)-IFNULL(T4.TOTAL_EXPENSE_AMOUNT,0) AS BALANCE, IFNULL((T3.LINE_ITEM_COST),0)-(IFNULL(T4.TOTAL_EXPENSE_AMOUNT,0) + IFNULL(T4.COMMITTED_AMOUNT,0)) AS BALANCELESS_COMMITTED_AMOUNT, IFNULL(ROUND((T4.TOTAL_EXPENSE_AMOUNT/(T3.LINE_ITEM_COST))*100,2),0) AS UTILIZATION_RATE,  NULL AS FM_POSTING_DATE FROM AWARD A1          INNER JOIN AWARD_BUDGET_HEADER T1 ON A1.AWARD_ID = T1.AWARD_ID	 INNER JOIN AWARD_BUDGET_DETAIL T3 ON T3.BUDGET_HEADER_ID = T1.BUDGET_HEADER_ID         LEFT JOIN (  select AWARD_NUMBER, INTERNAL_ORDER_CODE, SUM(ACTUAL_AMOUNT) as TOTAL_EXPENSE_AMOUNT , SUM(COMMITTED_AMOUNT) as COMMITTED_AMOUNT	from AWARD_EXPENSE_TRANS_AMT_RTCHILD  WHERE 1=1 <FILTER_CONDITION>  group by AWARD_NUMBER, INTERNAL_ORDER_CODE    ) T4 ON T4.AWARD_NUMBER = A1.AWARD_NUMBER AND T4.INTERNAL_ORDER_CODE = T3.INTERNAL_ORDER_CODE INNER JOIN BUDGET_CATEGORY A3 ON T3.BUDGET_CATEGORY_CODE = A3.BUDGET_CATEGORY_CODE INNER JOIN COST_ELEMENT A4 ON T3.COST_ELEMENT = A4.COST_ELEMENT WHERE A1.AWARD_SEQUENCE_STATUS = \'ACTIVE\' AND T1.VERSION_NUMBER IN (SELECT MAX(AB1.VERSION_NUMBER) FROM AWARD_BUDGET_HEADER AB1 WHERE AB1.AWARD_ID = T1.AWARD_ID)UNION ALL	  SELECT A1.AWARD_ID, A1.AWARD_NUMBER, A1.ACCOUNT_NUMBER, \'GRT\' as BUDGET_CATEGORY_CODE, \'Grant Revenue\' AS BUDGET_CATEGORY, CHILD.INTERNAL_ORDER_CODE AS IO_CODE, NULL AS COST_ELEMENT, 0 AS ORIGINAL_AMOUNT, 0 AS REVISED_AMOUNT, 0 AS EXPENDITURE_TO_DATE, 0 AS COMMITTED_AMOUNT, IFNULL(SUM(CHILD.AMOUNT_IN_FMA_CURRENCY),0) AS TOTAL_REVENUE_AMOUNT, 0 AS BALANCE, 0 AS BALANCELESS_COMMITTED_AMOUNT, 0 AS UTILIZATION_RATE, NULL AS FM_POSTING_DATE	 FROM AWARD A1  INNER JOIN AWARD_REVENUE_TRANSACTIONS CHILD ON CHILD.AWARD_NUMBER = A1.AWARD_NUMBER AND CHILD.ACTUAL_OR_COMMITTED_FLAG = \'R\'	 WHERE A1.AWARD_SEQUENCE_STATUS = \'ACTIVE\' <FILTER_CONDITION>	 GROUP BY CHILD.AWARD_NUMBER,CHILD.INTERNAL_ORDER_CODE   )CHILD ON MASTER_DATA.AWARD_ID = CHILD.AWARD_ID AND MASTER_DATA.PERSON_ROLE_ID = 3LEFT OUTER JOIN AWARD_ORIGINAL_L2_AMT_RT T31 ON T31.INTERNAL_ORDER_CODE = CHILD.IO_CODE',NOW(),'fibi_admin');
INSERT INTO REPORT_TYPE_JOIN  (TYPE_JOIN_ID,TYPE_CODE,JOIN_QUERY,UPDATE_TIMESTAMP,UPDATE_USER) VALUES (2,'7','INNER JOIN (SELECT /*+ BNL(S5) */ A1.AWARD_ID, A1.AWARD_NUMBER, A1.ACCOUNT_NUMBER, T3.BUDGET_CATEGORY_CODE, A3.DESCRIPTION AS BUDGET_CATEGORY,	A4.DESCRIPTION AS COST_ELEMENT, T3.INTERNAL_ORDER_CODE AS IO_CODE, IFNULL(S5.EXP_TO_DATE_BY_BUDGT_CATGRY,0) AS EXPENDITURE_TO_DATE, IFNULL(S5.COMMITTED_AMT_BY_BUDGT_CATGRY,0) AS COMMITTED_AMOUNT,	0 AS TOTAL_REVENUE_AMOUNT, IFNULL(S6.ORIGINAL_APPROVED_BUDGET,0) AS ORIGINAL_AMOUNT, IFNULL(S7.LATEST_APPROVED_BUDGET,0) AS REVISED_AMOUNT, IFNULL(S7.LATEST_APPROVED_BUDGET,0)-IFNULL(S5.EXP_TO_DATE_BY_BUDGT_CATGRY,0) AS BALANCE,  IFNULL(S7.LATEST_APPROVED_BUDGET,0)-(IFNULL(S5.EXP_TO_DATE_BY_BUDGT_CATGRY,0)+IFNULL(S5.COMMITTED_AMT_BY_BUDGT_CATGRY,0)) AS BALANCELESS_COMMITTED_AMOUNT, IFNULL(ROUND((S5.EXP_TO_DATE_BY_BUDGT_CATGRY/S7.LATEST_APPROVED_BUDGET)*100,2),0) AS UTILIZATION_RATE, NULL AS FM_POSTING_DATE FROM AWARD A1  INNER JOIN AWARD_BUDGET_HEADER T1 ON A1.AWARD_ID = T1.AWARD_ID INNER JOIN AWARD_BUDGET_DETAIL T3 ON T3.BUDGET_HEADER_ID = T1.BUDGET_HEADER_ID INNER JOIN BUDGET_CATEGORY A3 ON T3.BUDGET_CATEGORY_CODE = A3.BUDGET_CATEGORY_CODE LEFT OUTER JOIN (  select /*+ SUBQUERY(MATERIALIZATION) */ AWARD_NUMBER, BUDGET_CATEGORY_CODE, SUM(ACTUAL_AMOUNT) as EXP_TO_DATE_BY_BUDGT_CATGRY , SUM(COMMITTED_AMOUNT) as COMMITTED_AMT_BY_BUDGT_CATGRY from AWARD_EXPENSE_TRANS_AMT_RT CHILD WHERE 1=1 <FILTER_CONDITION> group by AWARD_NUMBER, BUDGET_CATEGORY_CODE  )S5 ON A1.AWARD_NUMBER = S5.AWARD_NUMBER AND T3.BUDGET_CATEGORY_CODE = S5.BUDGET_CATEGORY_CODELEFT JOIN AWARD_ORG_APPROVED_BUDGET_RT S6 ON T1.AWARD_ID = S6.AWARD_ID AND T3.BUDGET_CATEGORY_CODE = S6.BUDGET_CATEGORY_CODEINNER JOIN AWARD_LATEST_APROVED_BUDGET_RT S7 ON T1.AWARD_ID = S7.AWARD_ID AND T3.BUDGET_CATEGORY_CODE = S7.BUDGET_CATEGORY_CODE    INNER JOIN COST_ELEMENT A4 ON T3.COST_ELEMENT = A4.COST_ELEMENTWHERE A1.AWARD_SEQUENCE_STATUS = \'ACTIVE\'AND T1.VERSION_NUMBER IN (SELECT MAX(AB1.VERSION_NUMBER) FROM AWARD_BUDGET_HEADER AB1 WHERE AB1.AWARD_ID = T1.AWARD_ID) UNION ALL   SELECT A1.AWARD_ID,	A1.AWARD_NUMBER,	A1.ACCOUNT_NUMBER,	\'GRT\' as BUDGET_CATEGORY_CODE,	\'Grant Revenue\' AS BUDGET_CATEGORY,	null as COST_ELEMENT,	S2.INTERNAL_ORDER_CODE AS IO_CODE,	0 AS EXPENDITURE_TO_DATE,	0 AS COMMITTED_AMOUNT,	IFNULL(S2.REVENUE_AMOUNT,0) AS TOTAL_REVENUE_AMOUNT,	0 AS ORIGINAL_AMOUNT,	0 AS REVISED_AMOUNT,	0 AS BALANCE,  0 AS BALANCELESS_COMMITTED_AMOUNT,	0 AS UTILIZATION_RATE,	NULL AS FM_POSTING_DATE FROM AWARD A1  INNER JOIN(SELECT  CHILD.AWARD_NUMBER,  CHILD.INTERNAL_ORDER_CODE,  BUDGET_CATEGORY_CODE,  SUM(CHILD.AMOUNT_IN_FMA_CURRENCY) AS REVENUE_AMOUNT  FROM AWARD_REVENUE_TRANSACTIONS CHILD  WHERE CHILD.ACTUAL_OR_COMMITTED_FLAG = \'R\'  <FILTER_CONDITION>  GROUP BY CHILD.AWARD_NUMBER,BUDGET_CATEGORY_CODE  )S2 ON A1.AWARD_NUMBER = S2.AWARD_NUMBER WHERE A1.AWARD_SEQUENCE_STATUS = \'ACTIVE\'   )CHILD ON MASTER_DATA.AWARD_ID = CHILD.AWARD_ID AND MASTER_DATA.PERSON_ROLE_ID = 3 ',NOW(),'fibi_admin');
INSERT INTO REPORT_TYPE_JOIN  (TYPE_JOIN_ID,TYPE_CODE,JOIN_QUERY,UPDATE_TIMESTAMP,UPDATE_USER) VALUES (3,'8','INNER JOIN (SELECT A1.AWARD_ID, A1.AWARD_NUMBER, A1.ACCOUNT_NUMBER, T3.BUDGET_CATEGORY_CODE, A3.DESCRIPTION AS BUDGET_CATEGORY, T3.INTERNAL_ORDER_CODE AS IO_CODE, A4.DESCRIPTION AS COST_ELEMENT, CASE WHEN ACTUAL_OR_COMMITTED_FLAG = \'A\' THEN IFNULL(AMOUNT_IN_FMA_CURRENCY,0) ELSE 0 END AS EXPENDITURE_TO_DATE, CASE WHEN ACTUAL_OR_COMMITTED_FLAG = \'C\' THEN IFNULL(AMOUNT_IN_FMA_CURRENCY,0) ELSE 0 END AS COMMITED_AMOUNT, 0 AS REVENUE_AMOUNT, DATE(CHILD.FM_POSTING_DATE) AS FM_POSTING_DATE, DATE(CHILD.DOCUMENT_DATE) AS DOCUMENT_DATE, CHILD.VENDOR_NAME, CHILD.VENDOR_CODE, CHILD.FISCAL_YEAR, DATE(CHILD.BANK_CLEARING_DATE) AS BANK_CLEARING_DATE, DATE(CHILD.FI_POSTING_DATE) AS FI_POSTING_DATE, CHILD.FI_GL_ACCOUNT, CHILD.FI_GL_DESCRIPTION, DATE(CHILD.PR_DATE) AS PR_DATE, DATE(CHILD.PO_DATE) AS PO_DATE, CHILD.REQUESTER_NAME AS REQUESTOR_NAME, CHILD.TRANSACTION_REFERENCE_NUMBER, CHILD.ITEM_NUMBER, CHILD.REFERENCE_DOCUMENT_CATEGORY as REFERENCE_DOC_CATEGORY, CHILD.REFERENCE_ORG_UNIT, CHILD.ACCT_ASSIGNMENT_NUMBER, CHILD.SCHEDULE_LINE_NUMBER, CHILD.CONDITION_COUNTER, CHILD.REFERENCE_PROCEDURE, CHILD.DOCUMENT_NUMBER_FM_LINE_ITEM, CHILD.NUMBER_OF_POST_FM_LINE_ITEM, CHILD.COMPANY_CODE, CHILD.VALUE_TYPE, CHILD.AMOUNT_TYPE, CHILD.TRANSACTION_NUMBER, CHILD.REMARKS, CHILD.DOCUMENT_NUMBER, CHILD.PREDECESSOR_DOC_NUMBER FROM AWARD A1 INNER JOIN AWARD_BUDGET_HEADER T1 ON A1.AWARD_ID = T1.AWARD_ID INNER JOIN AWARD_BUDGET_DETAIL T3 ON T3.BUDGET_HEADER_ID = T1.BUDGET_HEADER_ID INNER JOIN BUDGET_CATEGORY A3 ON T3.BUDGET_CATEGORY_CODE = A3.BUDGET_CATEGORY_CODE INNER JOIN COST_ELEMENT A4 ON T3.COST_ELEMENT = A4.COST_ELEMENT INNER JOIN AWARD_EXPENSE_TRANSACTIONS CHILD ON A1.ACCOUNT_NUMBER = CHILD.ACCOUNT_NUMBER AND T3.INTERNAL_ORDER_CODE = CHILD.INTERNAL_ORDER_CODE WHERE A1.AWARD_SEQUENCE_STATUS = \'ACTIVE\' <FILTER_CONDITION> AND T1.SEQUENCE_NUMBER IN (SELECT MAX(AB1.SEQUENCE_NUMBER) FROM AWARD_BUDGET_HEADER AB1 WHERE AB1.AWARD_ID = T1.AWARD_ID) UNION ALL SELECT A1.AWARD_ID, A1.AWARD_NUMBER, A1.ACCOUNT_NUMBER, \'GRT\' AS BUDGET_CATEGORY_CODE, \'Grant Revenue\' AS BUDGET_CATEGORY, CHILD.INTERNAL_ORDER_CODE AS IO_CODE, NULL AS COST_ELEMENT, 0 AS EXPENDITURE_TO_DATE, 0 AS COMMITED_AMOUNT, IFNULL(CHILD.AMOUNT_IN_FMA_CURRENCY,0) AS REVENUE_AMOUNT, DATE(CHILD.FM_POSTING_DATE) AS FM_POSTING_DATE, str_to_date(CHILD.DOCUMENT_DATE, \"%Y-%m-%d\") AS DOCUMENT_DATE, CHILD.BP_NAME AS VENDOR_NAME, CHILD.BP_CODE AS VENDOR_CODE, CHILD.RYEAR AS FISCAL_YEAR, NULL AS BANK_CLEARING_DATE, str_to_date(CHILD.FI_POSTING_DATE, \"%Y-%m-%d\") AS FI_POSTING_DATE, CHILD.FI_GL_ACCOUNT, CHILD.FI_GL_DESCRIPTION, NULL AS PR_DATE, NULL AS PO_DATE, NULL AS REQUESTOR_NAME, CHILD.TRANSACTION_REFERENCE_NUMBER, NULL AS ITEM_NUMBER, NULL AS REFERENCE_DOC_CATEGORY, NULL AS REFERENCE_ORG_UNIT, NULL AS ACCT_ASSIGNMENT_NUMBER, NULL AS SCHEDULE_LINE_NUMBER, NULL AS CONDITION_COUNTER, NULL AS REFERENCE_PROCEDURE, NULL AS DOCUMENT_NUMBER_FM_LINE_ITEM, NULL AS NUMBER_OF_POST_FM_LINE_ITEM, CHILD.RBUKRS AS COMPANY_CODE, NULL AS VALUE_TYPE, NULL AS AMOUNT_TYPE, NULL AS TRANSACTION_NUMBER, CHILD.REMARKS, CHILD.GMIA_DOCNR AS DOCUMENT_NUMBER, NULL AS PREDECESSOR_DOC_NUMBER FROM AWARD A1 INNER JOIN AWARD_REVENUE_TRANSACTIONS CHILD ON A1.AWARD_NUMBER = CHILD.AWARD_NUMBER WHERE A1.AWARD_SEQUENCE_STATUS = \'ACTIVE\' <FILTER_CONDITION> )CHILD ON MASTER_DATA.AWARD_ID = CHILD.AWARD_ID',NOW(),'fibi_admin');
INSERT INTO REPORT_TYPE_JOIN  (TYPE_JOIN_ID,TYPE_CODE,JOIN_QUERY,UPDATE_TIMESTAMP,UPDATE_USER) VALUES (4,'16','INNER JOIN (SELECT \n 	A1.AWARD_ID,\n 	A1.AWARD_NUMBER,\n 	A1.ACCOUNT_NUMBER,\n 	T3.BUDGET_CATEGORY_CODE,\n 	A3.DESCRIPTION AS BUDGET_CATEGORY,\n 	T3.INTERNAL_ORDER_CODE AS IO_CODE,\n 	A4.DESCRIPTION AS COST_ELEMENT,\n 	CASE WHEN ACTUAL_OR_COMMITTED_FLAG = \'A\' THEN IFNULL(AMOUNT_IN_FMA_CURRENCY,0) ELSE 0 END AS EXPENDITURE_TO_DATE,\n    CASE WHEN ACTUAL_OR_COMMITTED_FLAG = \'C\' THEN IFNULL(AMOUNT_IN_FMA_CURRENCY,0) ELSE 0 END AS COMMITED_AMOUNT,\n	0 AS REVENUE_AMOUNT,\n 	DATE(CHILD.FM_POSTING_DATE) AS FM_POSTING_DATE,\n 	DATE(CHILD.DOCUMENT_DATE) AS DOCUMENT_DATE,\n 	CHILD.VENDOR_NAME,\n 	CHILD.VENDOR_CODE,\n 	CHILD.FISCAL_YEAR,\n 	DATE(CHILD.BANK_CLEARING_DATE) AS BANK_CLEARING_DATE,\n 	DATE(CHILD.FI_POSTING_DATE) AS FI_POSTING_DATE,\n 	CHILD.FI_GL_ACCOUNT,\n 	CHILD.FI_GL_DESCRIPTION,\n 	DATE(CHILD.PR_DATE) AS PR_DATE,\n 	DATE(CHILD.PO_DATE) AS PO_DATE,\n 	CHILD.REQUESTER_NAME AS REQUESTOR_NAME,\n 	CHILD.TRANSACTION_REFERENCE_NUMBER,\n 	CHILD.ITEM_NUMBER,\n 	CHILD.REFERENCE_DOCUMENT_CATEGORY as REFERENCE_DOC_CATEGORY,\n 	CHILD.REFERENCE_ORG_UNIT,					\n 	CHILD.ACCT_ASSIGNMENT_NUMBER,\n 	CHILD.SCHEDULE_LINE_NUMBER,\n 	CHILD.CONDITION_COUNTER,\n 	CHILD.REFERENCE_PROCEDURE,\n 	CHILD.DOCUMENT_NUMBER_FM_LINE_ITEM,\n 	CHILD.NUMBER_OF_POST_FM_LINE_ITEM,\n 	CHILD.COMPANY_CODE,\n 	CHILD.VALUE_TYPE,\n 	CHILD.AMOUNT_TYPE,\n 	CHILD.TRANSACTION_NUMBER,\n	CHILD.REMARKS,\n	CHILD.DOCUMENT_NUMBER\n FROM AWARD A1 \n INNER JOIN AWARD_BUDGET_HEADER T1 ON A1.AWARD_ID = T1.AWARD_ID\n INNER JOIN AWARD_BUDGET_DETAIL T3 ON T3.BUDGET_HEADER_ID = T1.BUDGET_HEADER_ID\n INNER JOIN BUDGET_CATEGORY A3 ON T3.BUDGET_CATEGORY_CODE = A3.BUDGET_CATEGORY_CODE\n INNER JOIN COST_ELEMENT A4 ON T3.COST_ELEMENT = A4.COST_ELEMENT\n INNER JOIN AWARD_EXPENSE_TRANSACTIONS CHILD ON A1.ACCOUNT_NUMBER = CHILD.ACCOUNT_NUMBER \n 										  AND T3.INTERNAL_ORDER_CODE = CHILD.INTERNAL_ORDER_CODE\n WHERE A1.AWARD_SEQUENCE_STATUS = \'ACTIVE\'\n AND T3.BUDGET_CATEGORY_CODE NOT IN ( \'EOM\',\'RSS\')\n <FILTER_CONDITION>\n AND T1.SEQUENCE_NUMBER IN (SELECT MAX(AB1.SEQUENCE_NUMBER) FROM AWARD_BUDGET_HEADER AB1\n 						   WHERE AB1.AWARD_ID = T1.AWARD_ID)\n)CHILD ON MASTER_DATA.AWARD_ID = CHILD.AWARD_ID',NOW(),'fibi_admin');
INSERT INTO REPORT_TYPE_JOIN  (TYPE_JOIN_ID,TYPE_CODE,JOIN_QUERY,UPDATE_TIMESTAMP,UPDATE_USER) VALUES (8,'31','INNER JOIN (SELECTA1.AWARD_ID,A1.AWARD_NUMBER,A1.ACCOUNT_NUMBER,T3.BUDGET_CATEGORY_CODE,A3.DESCRIPTION AS BUDGET_CATEGORY,T3.INTERNAL_ORDER_CODE AS IO_CODE,A4.DESCRIPTION AS COST_ELEMENT,CASE WHEN ACTUAL_OR_COMMITTED_FLAG = \'A\' THEN IFNULL(AMOUNT_IN_FMA_CURRENCY,0) ELSE 0 END AS EXPENDITURE_TO_DATE,CASE WHEN ACTUAL_OR_COMMITTED_FLAG = \'C\' THEN IFNULL(AMOUNT_IN_FMA_CURRENCY,0) ELSE 0 END AS COMMITED_AMOUNT,0 AS REVENUE_AMOUNT,DATE(CHILD.FM_POSTING_DATE) AS FM_POSTING_DATE,(CASE WHEN CHILD.PO_PR_FLAG = \'PR\' THEN CHILD.PR_DATEWHEN CHILD.PO_PR_FLAG = \'PO\' THEN CHILD.PO_DATEELSE NULLEND)AS DOCUMENT_DATE,CHILD.VENDOR_NAME,CHILD.VENDOR_CODE,CHILD.FISCAL_YEAR,DATE(CHILD.BANK_CLEARING_DATE) AS BANK_CLEARING_DATE,DATE(CHILD.FI_POSTING_DATE) AS FI_POSTING_DATE,CHILD.FI_GL_ACCOUNT,CHILD.FI_GL_DESCRIPTION,DATE(CHILD.PR_DATE) AS PR_DATE,DATE(CHILD.PO_DATE) AS PO_DATE,CHILD.REQUESTER_NAME AS REQUESTOR_NAME,CHILD.TRANSACTION_REFERENCE_NUMBER,CHILD.ITEM_NUMBER,CHILD.REFERENCE_DOCUMENT_CATEGORY as REFERENCE_DOC_CATEGORY,CHILD.REFERENCE_ORG_UNIT,CHILD.ACCT_ASSIGNMENT_NUMBER,CHILD.SCHEDULE_LINE_NUMBER,CHILD.CONDITION_COUNTER,CHILD.REFERENCE_PROCEDURE,CHILD.DOCUMENT_NUMBER_FM_LINE_ITEM,CHILD.NUMBER_OF_POST_FM_LINE_ITEM,CHILD.COMPANY_CODE,CHILD.VALUE_TYPE,CHILD.AMOUNT_TYPE,CHILD.TRANSACTION_NUMBER,CHILD.REMARKS,CHILD.DOCUMENT_NUMBER,CHILD.AWARD_EXPENSE_TRANS_IDFROM AWARD A1INNER JOIN AWARD_BUDGET_HEADER T1 ON A1.AWARD_ID = T1.AWARD_IDINNER JOIN AWARD_BUDGET_DETAIL T3 ON T3.BUDGET_HEADER_ID = T1.BUDGET_HEADER_IDINNER JOIN BUDGET_CATEGORY A3 ON T3.BUDGET_CATEGORY_CODE = A3.BUDGET_CATEGORY_CODEINNER JOIN COST_ELEMENT A4 ON T3.COST_ELEMENT = A4.COST_ELEMENTINNER JOIN AWARD_EXPENSE_TRANSACTIONS CHILD ON A1.ACCOUNT_NUMBER = CHILD.ACCOUNT_NUMBERAND T3.INTERNAL_ORDER_CODE = CHILD.INTERNAL_ORDER_CODEWHERE A1.AWARD_SEQUENCE_STATUS = \'ACTIVE\'AND CHILD.AWARD_EXPENSE_TRANS_ID IN  (SELECT AWARD_EXPENSE_TRANS_ID from AWARD_EXPENSE_TRANSACTIONSWHERE (DOCUMENT_NUMBER,ITEM_NUMBER,REFERENCE_DOCUMENT_CATEGORY,REFERENCE_ORG_UNIT,ACCT_ASSIGNMENT_NUMBER,SCHEDULE_LINE_NUMBER,CONDITION_COUNTER,REFERENCE_PROCEDURE,DOCUMENT_NUMBER_FM_LINE_ITEM) IN (SELECTCHILD.DOCUMENT_NUMBER AS DOCUMENT_NUMBER,CHILD.ITEM_NUMBER AS ITEM_NUMBER,CHILD.REFERENCE_DOCUMENT_CATEGORY AS REFERENCE_DOCUMENT_CATEGORY,CHILD.REFERENCE_ORG_UNIT AS REFERENCE_ORG_UNIT,CHILD.ACCT_ASSIGNMENT_NUMBER AS ACCT_ASSIGNMENT_NUMBER,CHILD.SCHEDULE_LINE_NUMBER AS SCHEDULE_LINE_NUMBER,CHILD.CONDITION_COUNTER AS CONDITION_COUNTER,CHILD.REFERENCE_PROCEDURE AS REFERENCE_PROCEDURE,CHILD.DOCUMENT_NUMBER_FM_LINE_ITEM AS DOCUMENT_NUMBER_FM_LINE_ITEMFROMaward_expense_transactions CHILDWHERE(CHILD.ACTUAL_OR_COMMITTED_FLAG = \'C\')<FILTER_CONDITION>  GROUP BY CHILD.DOCUMENT_NUMBER , CHILD.ITEM_NUMBER , CHILD.REFERENCE_DOCUMENT_CATEGORY , CHILD.REFERENCE_ORG_UNIT , CHILD.ACCT_ASSIGNMENT_NUMBER , CHILD.SCHEDULE_LINE_NUMBER , CHILD.CONDITION_COUNTER , CHILD.REFERENCE_PROCEDURE , CHILD.DOCUMENT_NUMBER_FM_LINE_ITEMHAVING (SUM(CHILD.AMOUNT_IN_FMA_CURRENCY) <> 0)))<FILTER_CONDITION>AND T1.SEQUENCE_NUMBER IN (SELECT MAX(AB1.SEQUENCE_NUMBER) FROM AWARD_BUDGET_HEADER AB1WHERE AB1.AWARD_ID = T1.AWARD_ID)UNION ALLSELECTA1.AWARD_ID,A1.AWARD_NUMBER,A1.ACCOUNT_NUMBER,\'GRT\' AS BUDGET_CATEGORY_CODE,\'Grant Revenue\' AS BUDGET_CATEGORY,CHILD.INTERNAL_ORDER_CODE AS IO_CODE,NULL AS COST_ELEMENT,0 AS EXPENDITURE_TO_DATE,0 AS COMMITED_AMOUNT,IFNULL(CHILD.AMOUNT_IN_FMA_CURRENCY,0) AS REVENUE_AMOUNT,DATE(CHILD.FM_POSTING_DATE) AS FM_POSTING_DATE,str_to_date(CHILD.DOCUMENT_DATE, \"%Y-%m-%d\") AS DOCUMENT_DATE,CHILD.BP_NAME AS VENDOR_NAME,CHILD.BP_CODE AS VENDOR_CODE,CHILD.RYEAR AS FISCAL_YEAR,NULL AS BANK_CLEARING_DATE,str_to_date(CHILD.FI_POSTING_DATE, \"%Y-%m-%d\") AS FI_POSTING_DATE,CHILD.FI_GL_ACCOUNT,CHILD.FI_GL_DESCRIPTION,NULL AS PR_DATE,NULL AS PO_DATE,NULL AS REQUESTOR_NAME,CHILD.TRANSACTION_REFERENCE_NUMBER,NULL AS ITEM_NUMBER,NULL AS REFERENCE_DOC_CATEGORY,NULL AS REFERENCE_ORG_UNIT,NULL AS ACCT_ASSIGNMENT_NUMBER,NULL AS SCHEDULE_LINE_NUMBER,NULL AS CONDITION_COUNTER,NULL AS REFERENCE_PROCEDURE,NULL AS DOCUMENT_NUMBER_FM_LINE_ITEM,NULL AS NUMBER_OF_POST_FM_LINE_ITEM,CHILD.RBUKRS AS COMPANY_CODE,NULL AS VALUE_TYPE,NULL AS AMOUNT_TYPE,NULL AS TRANSACTION_NUMBER,CHILD.REMARKS,CHILD.GMIA_DOCNR AS DOCUMENT_NUMBER,NULL AS AWARD_EXPENSE_TRANS_IDFROM AWARD A1INNER JOIN AWARD_REVENUE_TRANSACTIONS CHILD ON A1.AWARD_NUMBER = CHILD.AWARD_NUMBERWHERE A1.AWARD_SEQUENCE_STATUS = \'ACTIVE\'<FILTER_CONDITION>)CHILD ON MASTER_DATA.AWARD_ID = CHILD.AWARD_ID',NOW(),'fibi_admin');
INSERT INTO REPORT_TYPE_JOIN  (TYPE_JOIN_ID,TYPE_CODE,JOIN_QUERY,UPDATE_TIMESTAMP,UPDATE_USER) VALUES (9,'21','INNER JOIN (SELECT A1.TITLE AS TITLE, A1.ACCOUNT_NUMBER AS ACCOUNT_NUMBER,A1.AWARD_NUMBER AS AWARD_NUMBER, A1.AWARD_ID AS AWARD_ID,A1.PI_PERSON_ID AS PI_PERSON_ID, A1.PI_NAME AS PI_NAME,A1.AWARD_TYPE AS AWARD_TYPE, A1.ACCOUNT_TYPE AS ACCOUNT_TYPE, A1.AWARD_STATUS AS AWARD_STATUS,A1.SPONSOR_CODE AS SPONSOR_CODE,  A1.SPONSOR_NAME AS SPONSOR_NAME, A1.SPONSOR_TYPE AS SPONSOR_TYPE, A1.SPONSOR_AWARD_NUMBER AS SPONSOR_AWARD_NUMBER, A1.LEAD_UNIT_NUMBER AS LEAD_UNIT_NUMBER, A1.UNIT_NAME AS UNIT_NAME, A1.SUB_LEAD_UNIT AS SUB_LEAD_UNIT, A1.BEGIN_DATE AS BEGIN_DATE, A1.FINAL_EXPIRATION_DATE AS FINAL_EXPIRATION_DATE, A1.DURATION AS AWARD_DURATION, A1.ANTICIPATED_TOTAL_AMOUNT AS ANTICIPATED_TOTAL_AMOUNT, A1.AMOUNT_OBLIGATED_TO_DATE AS AMOUNT_OBLIGATED_TO_DATE, A1.TOTAL_COST AS TOTAL_COST, A1.TOTAL_PROJECT_COST AS TOTAL_PROJECT_COST, A1.GRANT_CALL_TITLE AS GRANT_CALL_TITLE, A1.FUNDING_SCHEME AS FUNDING_SCHEME, A1.BASIS_OF_PAYMENT_DESC AS BASIS_OF_PAYMENT_DESC, A1.METHOD_OF_PAYMENT_DESC AS METHOD_OF_PAYMENT_DESC, A1.PERSON_ROLE_ID,((TO_DAYS(UTC_TIMESTAMP()) - TO_DAYS(A1.FINAL_EXPIRATION_DATE)) + 1) AS BASIS_OF_PROJECT_END_DATE FROM AWARD_MASTER_DATASET_RT A1) AWARD_MASTER_DATA ON AWARD_MASTER_DATA.AWARD_NUMBER = CLAIM_DATA.AWARD_NUMBER AND AWARD_MASTER_DATA.PERSON_ROLE_ID = 3',NOW(),'fibi_admin');
INSERT INTO REPORT_TYPE_JOIN  (TYPE_JOIN_ID,TYPE_CODE,JOIN_QUERY,UPDATE_TIMESTAMP,UPDATE_USER) VALUES (10,'22','INNER JOIN (SELECT A1.TITLE AS TITLE, A1.ACCOUNT_NUMBER AS ACCOUNT_NUMBER,A1.AWARD_NUMBER AS AWARD_NUMBER, A1.AWARD_ID AS AWARD_ID,A1.PI_PERSON_ID AS PI_PERSON_ID, A1.PI_NAME AS PI_NAME,A1.AWARD_TYPE AS AWARD_TYPE, A1.ACCOUNT_TYPE AS ACCOUNT_TYPE, A1.AWARD_STATUS AS AWARD_STATUS,A1.SPONSOR_CODE AS SPONSOR_CODE,  A1.SPONSOR_NAME AS SPONSOR_NAME, A1.SPONSOR_TYPE AS SPONSOR_TYPE, A1.SPONSOR_AWARD_NUMBER AS SPONSOR_AWARD_NUMBER, A1.LEAD_UNIT_NUMBER AS LEAD_UNIT_NUMBER, A1.UNIT_NAME AS UNIT_NAME, A1.SUB_LEAD_UNIT AS SUB_LEAD_UNIT, A1.BEGIN_DATE AS BEGIN_DATE, A1.FINAL_EXPIRATION_DATE AS FINAL_EXPIRATION_DATE, A1.DURATION AS AWARD_DURATION, A1.ANTICIPATED_TOTAL_AMOUNT AS ANTICIPATED_TOTAL_AMOUNT, A1.AMOUNT_OBLIGATED_TO_DATE AS AMOUNT_OBLIGATED_TO_DATE, A1.TOTAL_COST AS TOTAL_COST, A1.TOTAL_PROJECT_COST AS TOTAL_PROJECT_COST, A1.GRANT_CALL_TITLE AS GRANT_CALL_TITLE, A1.FUNDING_SCHEME AS FUNDING_SCHEME, A1.BASIS_OF_PAYMENT_DESC AS BASIS_OF_PAYMENT_DESC, A1.METHOD_OF_PAYMENT_DESC AS METHOD_OF_PAYMENT_DESC, A1.PERSON_ROLE_ID,((TO_DAYS(UTC_TIMESTAMP()) - TO_DAYS(A1.FINAL_EXPIRATION_DATE)) + 1) AS BASIS_OF_PROJECT_END_DATE FROM AWARD_MASTER_DATASET_RT A1) AWARD_MASTER_DATA ON AWARD_MASTER_DATA.AWARD_NUMBER = CLAIM_DATA.AWARD_NUMBER AND AWARD_MASTER_DATA.PERSON_ROLE_ID = 3',NOW(),'fibi_admin');
INSERT INTO REPORT_TYPE_JOIN  (TYPE_JOIN_ID,TYPE_CODE,JOIN_QUERY,UPDATE_TIMESTAMP,UPDATE_USER) VALUES (11,'23','INNER JOIN (SELECT A1.TITLE AS TITLE, A1.ACCOUNT_NUMBER AS ACCOUNT_NUMBER,A1.AWARD_NUMBER AS AWARD_NUMBER, A1.AWARD_ID AS AWARD_ID,A1.PI_PERSON_ID AS PI_PERSON_ID, A1.PI_NAME AS PI_NAME,A1.AWARD_TYPE AS AWARD_TYPE, A1.ACCOUNT_TYPE AS ACCOUNT_TYPE, A1.AWARD_STATUS AS AWARD_STATUS,A1.SPONSOR_CODE AS SPONSOR_CODE,  A1.SPONSOR_NAME AS SPONSOR_NAME, A1.SPONSOR_TYPE AS SPONSOR_TYPE, A1.SPONSOR_AWARD_NUMBER AS SPONSOR_AWARD_NUMBER, A1.LEAD_UNIT_NUMBER AS LEAD_UNIT_NUMBER, A1.UNIT_NAME AS UNIT_NAME, A1.SUB_LEAD_UNIT AS SUB_LEAD_UNIT, A1.BEGIN_DATE AS BEGIN_DATE, A1.FINAL_EXPIRATION_DATE AS FINAL_EXPIRATION_DATE, A1.DURATION AS AWARD_DURATION, A1.ANTICIPATED_TOTAL_AMOUNT AS ANTICIPATED_TOTAL_AMOUNT, A1.AMOUNT_OBLIGATED_TO_DATE AS AMOUNT_OBLIGATED_TO_DATE, A1.TOTAL_COST AS TOTAL_COST, A1.TOTAL_PROJECT_COST AS TOTAL_PROJECT_COST, A1.GRANT_CALL_TITLE AS GRANT_CALL_TITLE, A1.FUNDING_SCHEME AS FUNDING_SCHEME, A1.BASIS_OF_PAYMENT_DESC AS BASIS_OF_PAYMENT_DESC, A1.METHOD_OF_PAYMENT_DESC AS METHOD_OF_PAYMENT_DESC, A1.PERSON_ROLE_ID,((TO_DAYS(UTC_TIMESTAMP()) - TO_DAYS(A1.FINAL_EXPIRATION_DATE)) + 1) AS BASIS_OF_PROJECT_END_DATE FROM AWARD_MASTER_DATASET_RT A1) AWARD_MASTER_DATA ON AWARD_MASTER_DATA.AWARD_NUMBER = CLAIM_DATA.AWARD_NUMBER AND AWARD_MASTER_DATA.PERSON_ROLE_ID = 3',NOW(),'fibi_admin');
INSERT INTO REPORT_TYPE_JOIN  (TYPE_JOIN_ID,TYPE_CODE,JOIN_QUERY,UPDATE_TIMESTAMP,UPDATE_USER) VALUES (12,'24','INNER JOIN (SELECT A1.TITLE AS TITLE, A1.ACCOUNT_NUMBER AS ACCOUNT_NUMBER,A1.AWARD_NUMBER AS AWARD_NUMBER, A1.AWARD_ID AS AWARD_ID,A1.PI_PERSON_ID AS PI_PERSON_ID, A1.PI_NAME AS PI_NAME,A1.AWARD_TYPE AS AWARD_TYPE, A1.ACCOUNT_TYPE AS ACCOUNT_TYPE, A1.AWARD_STATUS AS AWARD_STATUS,A1.SPONSOR_CODE AS SPONSOR_CODE,  A1.SPONSOR_NAME AS SPONSOR_NAME, A1.SPONSOR_TYPE AS SPONSOR_TYPE, A1.SPONSOR_AWARD_NUMBER AS SPONSOR_AWARD_NUMBER, A1.LEAD_UNIT_NUMBER AS LEAD_UNIT_NUMBER, A1.UNIT_NAME AS UNIT_NAME, A1.SUB_LEAD_UNIT AS SUB_LEAD_UNIT, A1.BEGIN_DATE AS BEGIN_DATE, A1.FINAL_EXPIRATION_DATE AS FINAL_EXPIRATION_DATE, A1.DURATION AS AWARD_DURATION, A1.ANTICIPATED_TOTAL_AMOUNT AS ANTICIPATED_TOTAL_AMOUNT, A1.AMOUNT_OBLIGATED_TO_DATE AS AMOUNT_OBLIGATED_TO_DATE, A1.TOTAL_COST AS TOTAL_COST, A1.TOTAL_PROJECT_COST AS TOTAL_PROJECT_COST, A1.GRANT_CALL_TITLE AS GRANT_CALL_TITLE, A1.FUNDING_SCHEME AS FUNDING_SCHEME, A1.BASIS_OF_PAYMENT_DESC AS BASIS_OF_PAYMENT_DESC, A1.METHOD_OF_PAYMENT_DESC AS METHOD_OF_PAYMENT_DESC, A1.PERSON_ROLE_ID,((TO_DAYS(UTC_TIMESTAMP()) - TO_DAYS(A1.FINAL_EXPIRATION_DATE)) + 1) AS BASIS_OF_PROJECT_END_DATE FROM AWARD_MASTER_DATASET_RT A1) AWARD_MASTER_DATA ON AWARD_MASTER_DATA.AWARD_NUMBER = CLAIM_DATA.AWARD_NUMBER AND AWARD_MASTER_DATA.PERSON_ROLE_ID = 3',NOW(),'fibi_admin');
INSERT INTO REPORT_TYPE_JOIN  (TYPE_JOIN_ID,TYPE_CODE,JOIN_QUERY,UPDATE_TIMESTAMP,UPDATE_USER) VALUES (13,'25','INNER JOIN (SELECT A1.TITLE AS TITLE, A1.ACCOUNT_NUMBER AS ACCOUNT_NUMBER,A1.AWARD_NUMBER AS AWARD_NUMBER, A1.AWARD_ID AS AWARD_ID,A1.PI_PERSON_ID AS PI_PERSON_ID, A1.PI_NAME AS PI_NAME,A1.AWARD_TYPE AS AWARD_TYPE, A1.ACCOUNT_TYPE AS ACCOUNT_TYPE, A1.AWARD_STATUS AS AWARD_STATUS,A1.SPONSOR_CODE AS SPONSOR_CODE,  A1.SPONSOR_NAME AS SPONSOR_NAME, A1.SPONSOR_TYPE AS SPONSOR_TYPE, A1.SPONSOR_AWARD_NUMBER AS SPONSOR_AWARD_NUMBER, A1.LEAD_UNIT_NUMBER AS LEAD_UNIT_NUMBER, A1.UNIT_NAME AS UNIT_NAME, A1.SUB_LEAD_UNIT AS SUB_LEAD_UNIT, A1.BEGIN_DATE AS BEGIN_DATE, A1.FINAL_EXPIRATION_DATE AS FINAL_EXPIRATION_DATE, A1.DURATION AS AWARD_DURATION, A1.ANTICIPATED_TOTAL_AMOUNT AS ANTICIPATED_TOTAL_AMOUNT, A1.AMOUNT_OBLIGATED_TO_DATE AS AMOUNT_OBLIGATED_TO_DATE, A1.TOTAL_COST AS TOTAL_COST, A1.TOTAL_PROJECT_COST AS TOTAL_PROJECT_COST, A1.GRANT_CALL_TITLE AS GRANT_CALL_TITLE, A1.FUNDING_SCHEME AS FUNDING_SCHEME, A1.BASIS_OF_PAYMENT_DESC AS BASIS_OF_PAYMENT_DESC, A1.METHOD_OF_PAYMENT_DESC AS METHOD_OF_PAYMENT_DESC, A1.PERSON_ROLE_ID,((TO_DAYS(UTC_TIMESTAMP()) - TO_DAYS(A1.FINAL_EXPIRATION_DATE)) + 1) AS BASIS_OF_PROJECT_END_DATE FROM AWARD_MASTER_DATASET_RT A1) AWARD_MASTER_DATA ON AWARD_MASTER_DATA.AWARD_NUMBER = CLAIM_DATA.AWARD_NUMBER AND AWARD_MASTER_DATA.PERSON_ROLE_ID = 3',NOW(),'fibi_admin');
INSERT INTO REPORT_TYPE_JOIN  (TYPE_JOIN_ID,TYPE_CODE,JOIN_QUERY,UPDATE_TIMESTAMP,UPDATE_USER) VALUES (14,'26','INNER JOIN (SELECT A1.TITLE AS TITLE, A1.ACCOUNT_NUMBER AS ACCOUNT_NUMBER,A1.AWARD_NUMBER AS AWARD_NUMBER, A1.AWARD_ID AS AWARD_ID,A1.PI_PERSON_ID AS PI_PERSON_ID, A1.PI_NAME AS PI_NAME,A1.AWARD_TYPE AS AWARD_TYPE, A1.ACCOUNT_TYPE AS ACCOUNT_TYPE, A1.AWARD_STATUS AS AWARD_STATUS,A1.SPONSOR_CODE AS SPONSOR_CODE,  A1.SPONSOR_NAME AS SPONSOR_NAME, A1.SPONSOR_TYPE AS SPONSOR_TYPE, A1.SPONSOR_AWARD_NUMBER AS SPONSOR_AWARD_NUMBER, A1.LEAD_UNIT_NUMBER AS LEAD_UNIT_NUMBER, A1.UNIT_NAME AS UNIT_NAME, A1.SUB_LEAD_UNIT AS SUB_LEAD_UNIT, A1.BEGIN_DATE AS BEGIN_DATE, A1.FINAL_EXPIRATION_DATE AS FINAL_EXPIRATION_DATE, A1.DURATION AS AWARD_DURATION, A1.ANTICIPATED_TOTAL_AMOUNT AS ANTICIPATED_TOTAL_AMOUNT, A1.AMOUNT_OBLIGATED_TO_DATE AS AMOUNT_OBLIGATED_TO_DATE, A1.TOTAL_COST AS TOTAL_COST, A1.TOTAL_PROJECT_COST AS TOTAL_PROJECT_COST, A1.GRANT_CALL_TITLE AS GRANT_CALL_TITLE, A1.FUNDING_SCHEME AS FUNDING_SCHEME, A1.BASIS_OF_PAYMENT_DESC AS BASIS_OF_PAYMENT_DESC, A1.METHOD_OF_PAYMENT_DESC AS METHOD_OF_PAYMENT_DESC, A1.PERSON_ROLE_ID,((TO_DAYS(UTC_TIMESTAMP()) - TO_DAYS(A1.FINAL_EXPIRATION_DATE)) + 1) AS BASIS_OF_PROJECT_END_DATE FROM AWARD_MASTER_DATASET_RT A1) AWARD_MASTER_DATA ON AWARD_MASTER_DATA.AWARD_NUMBER = CLAIM_DATA.AWARD_NUMBER AND AWARD_MASTER_DATA.PERSON_ROLE_ID = 3',NOW(),'fibi_admin');
INSERT INTO REPORT_TYPE_JOIN  (TYPE_JOIN_ID,TYPE_CODE,JOIN_QUERY,UPDATE_TIMESTAMP,UPDATE_USER) VALUES (15,'40','INNER JOIN (SELECT A1.TITLE AS TITLE, A1.ACCOUNT_NUMBER AS ACCOUNT_NUMBER,A1.AWARD_NUMBER AS AWARD_NUMBER, A1.AWARD_ID AS AWARD_ID,A1.PI_PERSON_ID AS PI_PERSON_ID, A1.PI_NAME AS PI_NAME,A1.AWARD_TYPE AS AWARD_TYPE, A1.ACCOUNT_TYPE AS ACCOUNT_TYPE, A1.AWARD_STATUS AS AWARD_STATUS,A1.SPONSOR_CODE AS SPONSOR_CODE,  A1.SPONSOR_NAME AS SPONSOR_NAME, A1.SPONSOR_TYPE AS SPONSOR_TYPE, A1.SPONSOR_AWARD_NUMBER AS SPONSOR_AWARD_NUMBER, A1.LEAD_UNIT_NUMBER AS LEAD_UNIT_NUMBER, A1.UNIT_NAME AS UNIT_NAME, A1.SUB_LEAD_UNIT AS SUB_LEAD_UNIT, A1.BEGIN_DATE AS BEGIN_DATE, A1.FINAL_EXPIRATION_DATE AS FINAL_EXPIRATION_DATE, A1.DURATION AS AWARD_DURATION, A1.ANTICIPATED_TOTAL_AMOUNT AS ANTICIPATED_TOTAL_AMOUNT, A1.AMOUNT_OBLIGATED_TO_DATE AS AMOUNT_OBLIGATED_TO_DATE, A1.TOTAL_COST AS TOTAL_COST, A1.TOTAL_PROJECT_COST AS TOTAL_PROJECT_COST, A1.GRANT_CALL_TITLE AS GRANT_CALL_TITLE, A1.FUNDING_SCHEME AS FUNDING_SCHEME, A1.BASIS_OF_PAYMENT_DESC AS BASIS_OF_PAYMENT_DESC, A1.METHOD_OF_PAYMENT_DESC AS METHOD_OF_PAYMENT_DESC, A1.PERSON_ROLE_ID,((TO_DAYS(UTC_TIMESTAMP()) - TO_DAYS(A1.FINAL_EXPIRATION_DATE)) + 1) AS BASIS_OF_PROJECT_END_DATE FROM AWARD_MASTER_DATASET_RT A1) AWARD_MASTER_DATA ON AWARD_MASTER_DATA.AWARD_NUMBER = CLAIM_DATA.AWARD_NUMBER AND AWARD_MASTER_DATA.PERSON_ROLE_ID = 3',NOW(),'fibi_admin');
INSERT INTO REPORT_TYPE_JOIN  (TYPE_JOIN_ID,TYPE_CODE,JOIN_QUERY,UPDATE_TIMESTAMP,UPDATE_USER) VALUES (16,'11','INNER JOIN PERSON ON PERSON_ID = KEY_PERSON_ID',NOW(),'fibi_admin');
INSERT INTO REPORT_TYPE_JOIN  (TYPE_JOIN_ID,TYPE_CODE,JOIN_QUERY,UPDATE_TIMESTAMP,UPDATE_USER) VALUES (17,'48','INNER JOIN (SELECT DISTINCT AWARD_ID,AWARD_NUMBER,BUDGET_CATEGORY_CODE,SUM(PERIOD_1)AS PERIOD_1,SUM(PERIOD_2)AS PERIOD_2, SUM(PERIOD_3)AS PERIOD_3, SUM(PERIOD_4) AS PERIOD_4,SUM(PERIOD_5) AS PERIOD_5,SUM(PERIOD_6)AS PERIOD_6,SUM(PERIOD_7)AS PERIOD_7,SUM(PERIOD_8) AS PERIOD_8,SUM(PERIOD_9)AS PERIOD_9,SUM(PERIOD_10)AS PERIOD_10,(SUM(PERIOD_1)+SUM(PERIOD_2)+SUM(PERIOD_3)+SUM(PERIOD_4)+SUM(PERIOD_5)+SUM(PERIOD_6)+SUM(PERIOD_7)+SUM(PERIOD_8)+SUM(PERIOD_9)+SUM(PERIOD_10)) AS TOTAL,ACCOUNT_NUMBER,BUDGET_CATEGORY, CASE WHEN SUM(EXPENDITURE_TO_DATE)  IS NOT NULL THEN SUM(EXPENDITURE_TO_DATE) ELSE 0 END AS EXPENDITURE_TO_DATE,CASE WHEN ROUND((sum(EXPENDITURE_TO_DATE)/sum(LATEST_APPROVED_BUDGET))*100,2)  IS NOT NULL THEN ROUND((sum(EXPENDITURE_TO_DATE)/sum(LATEST_APPROVED_BUDGET))*100,2) ELSE 0 END as UTILIZATION_RATE FROM            ( SELECT DISTINCT A1.AWARD_ID, A1.AWARD_NUMBER, A1.ACCOUNT_NUMBER, T3.BUDGET_CATEGORY_CODE,A3.DESCRIPTION         AS BUDGET_CATEGORY,CASE  WHEN T3.BUDGET_PERIOD=\'1\' THEN T3.LINE_ITEM_COST  ELSE 0  END AS PERIOD_1,   CASE   WHEN T3.BUDGET_PERIOD=\'2\' THEN T3.LINE_ITEM_COST  ELSE 0  END AS PERIOD_2,  CASE   WHEN T3.BUDGET_PERIOD=\'3\' THEN T3.LINE_ITEM_COST ELSE 0 END AS PERIOD_3,   CASE WHEN T3.BUDGET_PERIOD=\'4\' THEN T3.LINE_ITEM_COST ELSE 0 END AS PERIOD_4,  CASE WHEN T3.BUDGET_PERIOD=\'5\' THEN T3.LINE_ITEM_COST   ELSE 0   END AS PERIOD_5, CASE WHEN T3.BUDGET_PERIOD=\'6\' THEN T3.LINE_ITEM_COST  ELSE 0 END AS PERIOD_6,   CASE    WHEN T3.BUDGET_PERIOD=\'7\' THEN T3.LINE_ITEM_COST    ELSE 0  END AS PERIOD_7,  CASE   WHEN T3.BUDGET_PERIOD=\'8\' THEN T3.LINE_ITEM_COST   ELSE 0    END AS PERIOD_8,     CASE   WHEN T3.BUDGET_PERIOD=\'9\' THEN T3.LINE_ITEM_COST    ELSE 0    END AS PERIOD_9,    CASE   WHEN T3.BUDGET_PERIOD=\'10\' THEN T3.LINE_ITEM_COST   ELSE 0   END                         AS PERIOD_10,  S2.TOTAL_EXPENSE_AMOUNT  AS EXPENDITURE_TO_DATE, T3.LINE_ITEM_COST as LATEST_APPROVED_BUDGET FROM            AWARD A1	 INNER JOIN      AWARD_BUDGET_HEADER T1   ON              A1.AWARD_ID = T1.AWARD_ID       INNER JOIN      AWARD_BUDGET_DETAIL T3   ON              T3.BUDGET_HEADER_ID = T1.BUDGET_HEADER_ID    INNER JOIN      BUDGET_CATEGORY A3  ON              T3.BUDGET_CATEGORY_CODE = A3.BUDGET_CATEGORY_CODE\nLEFT JOIN       AWARD_EXPENSE_DETAILS S2 ON              A1.AWARD_NUMBER = S2.AWARD_NUMBER AND A1.ACCOUNT_NUMBER = S2.ACCOUNT_NUMBER AND  T3.INTERNAL_ORDER_CODE = S2.INTERNAL_ORDER_CODE\nLEFT JOIN  AWARD_EXPENSE_TRANSACTIONS S3 ON              A1.AWARD_NUMBER = S3.AWARD_NUMBER AND A1.ACCOUNT_NUMBER = S3.ACCOUNT_NUMBER\n  WHERE           A1.AWARD_SEQUENCE_STATUS = \'ACTIVE\'  <FILTER_CONDITION> AND             T1.VERSION_NUMBER IN( SELECT MAX(AB1.VERSION_NUMBER)   FROM   AWARD_BUDGET_HEADER AB1   WHERE  AB1.AWARD_ID = T1.AWARD_ID AND (AWARD_BUDGET_STATUS_CODE =\'10\' or AWARD_BUDGET_STATUS_CODE=\'9\' ) )) AS T1 GROUP BY  AWARD_ID,BUDGET_CATEGORY_CODE)CHILD ON MASTER_DATA.AWARD_ID = CHILD.AWARD_ID AND MASTER_DATA.PERSON_ROLE_ID = 3',NOW(),'fibi_admin');
INSERT INTO REPORT_TYPE_JOIN  (TYPE_JOIN_ID,TYPE_CODE,JOIN_QUERY,UPDATE_TIMESTAMP,UPDATE_USER) VALUES (18,'49','INNER JOIN(SELECT DISTINCT AWARD_ID, AWARD_NUMBER, BUDGET_CATEGORY_CODE,SUM(PERIOD_1)  AS PERIOD_1,SUM(PERIOD_2)  AS PERIOD_2,\nSUM(PERIOD_3)  AS PERIOD_3, SUM(PERIOD_4)  AS PERIOD_4, SUM(PERIOD_5)  AS PERIOD_5, SUM(PERIOD_6)  AS PERIOD_6, SUM(PERIOD_7)  AS PERIOD_7,SUM(PERIOD_8)  AS PERIOD_8,\n SUM(PERIOD_9)  AS PERIOD_9, SUM(PERIOD_10) AS PERIOD_10,\n (SUM(PERIOD_1)+SUM(PERIOD_2)+SUM(PERIOD_3)+SUM(PERIOD_4)+SUM(PERIOD_5)+SUM(PERIOD_6)+SUM(PERIOD_7)+SUM(PERIOD_8)+SUM(PERIOD_9)+SUM(PERIOD_10)) AS TOTAL,ACCOUNT_NUMBER,\n BUDGET_CATEGORY,IO_CODE, COST_ELEMENT,SUM(QUANTITY) AS QUANTITY, CASE WHEN EXPENDITURE_TO_DATE IS NOT NULL THEN EXPENDITURE_TO_DATE ELSE 0 END AS EXPENDITURE_TO_DATE,CASE WHEN ROUND((EXPENDITURE_TO_DATE/LATEST_APPROVED_BUDGET)*100,2) IS NOT NULL THEN ROUND((EXPENDITURE_TO_DATE/LATEST_APPROVED_BUDGET)*100,2) ELSE 0 END as UTILIZATION_RATE\n FROM            ( SELECT DISTINCT A1.AWARD_ID, A1.AWARD_NUMBER,  A1.ACCOUNT_NUMBER,  T3.BUDGET_CATEGORY_CODE, A3.DESCRIPTION        \n AS BUDGET_CATEGORY, T3.INTERNAL_ORDER_CODE AS IO_CODE, A4.DESCRIPTION         AS COST_ELEMENT,  CASE WHEN T3.BUDGET_PERIOD=\'1\' THEN T3.LINE_ITEM_COST  ELSE 0 END AS PERIOD_1,\n CASE WHEN T3.BUDGET_PERIOD=\'2\' THEN T3.LINE_ITEM_COST  ELSE 0 END AS PERIOD_2, CASE WHEN T3.BUDGET_PERIOD=\'3\' THEN T3.LINE_ITEM_COST ELSE 0 END AS PERIOD_3, \n CASE WHEN T3.BUDGET_PERIOD=\'4\' THEN T3.LINE_ITEM_COST   ELSE 0 END AS PERIOD_4,   CASE  WHEN T3.BUDGET_PERIOD=\'5\' THEN T3.LINE_ITEM_COST ELSE 0 END AS PERIOD_5, \n CASE  WHEN T3.BUDGET_PERIOD=\'6\' THEN T3.LINE_ITEM_COST   ELSE 0  END AS PERIOD_6,  CASE   WHEN T3.BUDGET_PERIOD=\'7\' THEN T3.LINE_ITEM_COST ELSE 0 END AS PERIOD_7,\n CASE WHEN T3.BUDGET_PERIOD=\'8\' THEN T3.LINE_ITEM_COST ELSE 0 END AS PERIOD_8, CASE WHEN T3.BUDGET_PERIOD=\'9\' THEN T3.LINE_ITEM_COST ELSE 0 END AS PERIOD_9, \n CASE WHEN T3.BUDGET_PERIOD=\'10\' THEN T3.LINE_ITEM_COST ELSE 0  END         AS PERIOD_10, T3.QUANTITY AS QUANTITY , \nS2.TOTAL_EXPENSE_AMOUNT  AS EXPENDITURE_TO_DATE, T3.LINE_ITEM_COST as LATEST_APPROVED_BUDGET\n FROM            AWARD A1 INNER JOIN      AWARD_BUDGET_HEADER T1 ON              A1.AWARD_ID = T1.AWARD_ID \n INNER JOIN      AWARD_BUDGET_DETAIL T3 ON              T3.BUDGET_HEADER_ID = T1.BUDGET_HEADER_ID \n INNER JOIN      BUDGET_CATEGORY A3 ON              T3.BUDGET_CATEGORY_CODE = A3.BUDGET_CATEGORY_CODE \nLEFT JOIN       AWARD_EXPENSE_DETAILS S2 ON              A1.AWARD_NUMBER = S2.AWARD_NUMBER AND A1.ACCOUNT_NUMBER = S2.ACCOUNT_NUMBER AND  T3.INTERNAL_ORDER_CODE = S2.INTERNAL_ORDER_CODE\nLEFT JOIN  AWARD_EXPENSE_TRANSACTIONS S3 ON              A1.AWARD_NUMBER = S3.AWARD_NUMBER AND A1.ACCOUNT_NUMBER = S3.ACCOUNT_NUMBER\n INNER JOIN      COST_ELEMENT A4 ON              T3.COST_ELEMENT = A4.COST_ELEMENT\n WHERE           A1.AWARD_SEQUENCE_STATUS = \'ACTIVE\'   <FILTER_CONDITION> AND             T1.VERSION_NUMBER IN(  SELECT MAX(AB1.VERSION_NUMBER) FROM   AWARD_BUDGET_HEADER AB1 WHERE  AB1.AWARD_ID = T1.AWARD_ID AND (AWARD_BUDGET_STATUS_CODE =\'10\' or AWARD_BUDGET_STATUS_CODE=\'9\' ))) AS T1 GROUP BY AWARD_ID,COST_ELEMENT,IO_CODE)CHILD ON MASTER_DATA.AWARD_ID = CHILD.AWARD_ID AND MASTER_DATA.PERSON_ROLE_ID = 3',NOW(),'fibi_admin');
INSERT INTO REPORT_TYPE_JOIN  (TYPE_JOIN_ID,TYPE_CODE,JOIN_QUERY,UPDATE_TIMESTAMP,UPDATE_USER) VALUES (19,'51','left outer join(select t1.award_number,t1.internal_order_code,t1.bank_clearing_date,t1.remarks,t1.fm_posting_date,t1.fi_posting_date,t1.document_date,t1.fi_gl_description,t1.fi_gl_account,t1.vendor_code,t1.asset_location_code,t1.account_number,t1.amount_in_fma_currency,t1.vendor_name as vendor_name,t1.reference_doc_number as reference_doc_number,t1.predecessor_doc_number as predecessor_doc_number,t1.asset_location from award_expense_transactions t1 where t1.amount_in_fma_currency <> 0.00 and t1.actual_or_committed_flag = \'a\' and (t1.internal_order_code is null  or  (not exists (select distinct  trim(t3.internal_order_code) as io_code	from award_budget_header t2 join award_budget_detail t3 on t3.budget_header_id = t2.budget_header_id	where t2.award_number= t1.award_number and t2.version_number in (select max(t4.version_number)	from award_budget_header t4	where t2.award_id = t4.award_id)    and t3.internal_order_code is not null   and trim(t3.internal_order_code) = t1.internal_order_code   union	select distinct  trim(t7.io_code)	from award_budget_header t4 	join award_budget_detail t5 on t5.budget_header_id = t4.budget_header_id	left outer join award_budget_person_detail t7 on t7.budget_details_id = t5.budget_details_id	where t4.award_number=t1.award_number and t4.version_number in (select max(t6.version_number)	from award_budget_header t6	where t4.award_id = t6.award_id)and t7.io_code is not null and trim(t7.io_code) = t1.internal_order_code) ))) child on child.award_number = master_data.award_number and master_data.person_role_id = 3',NOW(),'fibi_admin');
INSERT INTO REPORT_TYPE_JOIN  (TYPE_JOIN_ID,TYPE_CODE,JOIN_QUERY,UPDATE_TIMESTAMP,UPDATE_USER) VALUES (20,'91','left outer join( select IFNULL(t2.EXPENSE_AMT,0.00) as ANNUALIZED_EXPENSE_AMT,IFNULL(t3.EXPENSE_AMT_WO_IRC,0.00) as ANNUALIZED_EXPENSE_AMT_WO_IRC,T2.FM_POSTING_DATE  AS FM_POSTING_DATE,t2.ACCOUNT_NUMBER from(	select CHILD.ACCOUNT_NUMBER, SUM(CHILD.AMOUNT_IN_FMA_CURRENCY) EXPENSE_AMT,CHILD.FM_POSTING_DATE from award_expense_transactions CHILD where CHILD.ACTUAL_OR_COMMITTED_FLAG = \'A\' <FILTER_CONDITION>	and CHILD.INTERNAL_ORDER_CODE in (select distinct INTERNAL_ORDER_CODE from AWARD_BUDGET_DETAIL)group by CHILD.ACCOUNT_NUMBER) as t2 LEFT OUTER JOIN (select CHILD.ACCOUNT_NUMBER, SUM(CHILD.AMOUNT_IN_FMA_CURRENCY) EXPENSE_AMT_WO_IRC from award_expense_transactions CHILD where CHILD.ACTUAL_OR_COMMITTED_FLAG = \'A\' <FILTER_CONDITION> AND substr(CHILD.INTERNAL_ORDER_CODE,16,3) <> \'IRC\' and CHILD.INTERNAL_ORDER_CODE in (select distinct INTERNAL_ORDER_CODE from AWARD_BUDGET_DETAIL)group by CHILD.ACCOUNT_NUMBER) t3 on t3.ACCOUNT_NUMBER = t2.ACCOUNT_NUMBER) CHILD ON CHILD.ACCOUNT_NUMBER = master_data.ACCOUNT_NUMBER\n',NOW(),'fibi_admin');
INSERT INTO REPORT_TYPE_JOIN  (TYPE_JOIN_ID,TYPE_CODE,JOIN_QUERY,UPDATE_TIMESTAMP,UPDATE_USER) VALUES (28,'99','INNER JOIN PROG_RPT_MILESTONES_RT CHILD ON MASTER.PROGRESS_REPORT_ID = CHILD.PROGRESS_REPORT_ID',NOW(),'fibi_admin');
INSERT INTO REPORT_TYPE_JOIN  (TYPE_JOIN_ID,TYPE_CODE,JOIN_QUERY,UPDATE_TIMESTAMP,UPDATE_USER) VALUES (29,'100','INNER JOIN PROG_RPT_KPI_RT CHILD ON MASTER.PROGRESS_REPORT_ID = CHILD.PROGRESS_REPORT_ID',NOW(),'fibi_admin');
